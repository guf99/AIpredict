<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VOLIX AI</title>
    <!-- Ethers.js for Web3 functionality -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.9.0/ethers.umd.min.js"></script>
    <style>
        :root {
            --bg: #050505;
            --bg-soft: #0b0d0f;
            --panel: rgba(12, 14, 16, 0.7);
            --panel-strong: rgba(12, 14, 16, 0.9);
            --border: rgba(255, 255, 255, 0.08);
            --text: #f8f8f8;
            --muted: #9da3aa;
            --accent: #97eefb;
            --accent-strong: #67d7e7;
            --success: #2fe37f;
            --danger: #ff4d4d;
            --warning: #ffb020;
            --chip: rgba(151, 238, 251, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            background: radial-gradient(circle at 20% 20%, rgba(38, 91, 97, 0.25), transparent 55%),
                radial-gradient(circle at 80% 20%, rgba(38, 91, 97, 0.18), transparent 45%),
                var(--bg);
            color: var(--text);
            min-height: 100vh;
            letter-spacing: 0.2px;
        }

        .grid-bg {
            position: fixed;
            inset: 0;
            background-image: linear-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.04) 1px, transparent 1px);
            background-size: 80px 80px;
            opacity: 0.4;
            pointer-events: none;
            z-index: 0;
        }

        .container {
            width: min(1200px, 92vw);
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        header {
            border-bottom: 1px solid var(--border);
            background: rgba(5, 5, 5, 0.7);
            backdrop-filter: blur(12px);
            position: sticky;
            top: 0;
            z-index: 10;
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .nav {
            display: grid;
            grid-template-columns: minmax(180px, 1fr) auto minmax(180px, 1fr);
            align-items: center;
            padding: 18px 0;
            gap: 12px;
            width: 100%;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            letter-spacing: 1px;
            animation: fadeInLeft 0.8s ease-out;
        }

        @keyframes fadeInLeft {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .brand-badge {
            width: 40px;
            height: 40px;
            background: transparent;
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .brand-badge img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-badge picture {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        nav {
            justify-self: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 32px;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--muted);
            margin: 0;
            padding: 0;
        }

        nav ul li {
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding: 8px 0;
            animation: fadeInDown 0.6s ease-out backwards;
        }

        nav ul li:nth-child(1) { animation-delay: 0.1s; }
        nav ul li:nth-child(2) { animation-delay: 0.2s; }
        nav ul li:nth-child(3) { animation-delay: 0.3s; }
        nav ul li:nth-child(4) { animation-delay: 0.4s; }

        nav ul li::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 2px;
        }

        nav ul li::after {
            content: '';
            position: absolute;
            inset: -8px;
            background: radial-gradient(circle, rgba(151, 238, 251, 0.1), transparent 70%);
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        nav ul li:hover {
            color: var(--accent);
            text-shadow: 0 0 20px rgba(151, 238, 251, 0.5);
            transform: translateY(-2px);
        }

        nav ul li:hover::before {
            transform: translateX(-50%) scaleX(1);
        }

        nav ul li:hover::after {
            opacity: 1;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 18px;
            font-size: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--muted);
            justify-self: end;
            animation: fadeInRight 0.8s ease-out;
        }

        .status-dot {
            width: 7px;
            height: 7px;
            background: var(--success);
            border-radius: 50%;
            display: inline-block;
            box-shadow: 0 0 12px rgba(46, 227, 127, 0.8);
            animation: statusPulse 2s ease-in-out infinite;
        }

        @keyframes statusPulse {
            0%, 100% { 
                box-shadow: 0 0 12px rgba(46, 227, 127, 0.8);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 20px rgba(46, 227, 127, 1), 0 0 30px rgba(46, 227, 127, 0.5);
                transform: scale(1.2);
            }
        }

        .btn {
            padding: 10px 18px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text);
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn:hover {
            border-color: var(--accent);
            color: var(--accent);
            box-shadow: 0 0 20px rgba(151, 238, 251, 0.2);
        }

        .hero {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 120px 0 80px;
            text-align: center;
        }

        .hero > div:first-child {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 900px;
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) backwards;
        }

        .hero > div:last-child {
            display: none;
        }

        /* FAQ Toggle Styles */
        .faq-open .faq-answer {
            display: block !important;
        }
        .faq-open span {
            transform: rotate(45deg);
        }
        .feature-card span {
            transition: transform 0.3s ease;
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 14px;
            border-radius: 999px;
            background: var(--chip);
            border: 1px solid rgba(151, 238, 251, 0.3);
            color: var(--accent);
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 18px;
            animation: glow 3s ease-in-out infinite;
            transition: all 0.3s ease;
        }

        .pill:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(151, 238, 251, 0.4);
        }

        .hero h1 {
            font-size: clamp(46px, 8vw, 84px);
            line-height: 0.92;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: slideInLeft 1s cubic-bezier(0.4, 0, 0.2, 1) 0.3s backwards;
        }

        .hero h1 span {
            color: var(--accent);
            text-shadow: 0 0 25px rgba(151, 238, 251, 0.6);
            display: inline-block;
            animation: textGlow 2s ease-in-out infinite;
        }

        .hero p {
            margin-top: 24px;
            font-size: 16px;
            color: var(--muted);
            line-height: 1.6;
            max-width: 620px;
            animation: fadeIn 1s ease-out 0.5s backwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(151, 238, 251, 0.2);
            }
            50% {
                box-shadow: 0 0 20px rgba(151, 238, 251, 0.4), 0 0 30px rgba(151, 238, 251, 0.2);
            }
        }

        @keyframes textGlow {
            0%, 100% {
                text-shadow: 0 0 25px rgba(151, 238, 251, 0.6);
            }
            50% {
                text-shadow: 0 0 35px rgba(151, 238, 251, 0.8), 0 0 45px rgba(151, 238, 251, 0.4);
            }
        }

        .hero p strong {
            color: var(--text);
        }

        .terminal {
            background: linear-gradient(180deg, rgba(11, 14, 16, 0.95), rgba(9, 11, 13, 0.85));
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 22px;
            min-height: 360px;
            box-shadow: 0 0 60px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .terminal:hover {
            box-shadow: 0 0 80px rgba(151, 238, 251, 0.2), 0 0 60px rgba(0, 0, 0, 0.5);
            border-color: rgba(151, 238, 251, 0.3);
            transform: translateY(-2px);
        }

        .terminal::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at top right, rgba(151, 238, 251, 0.15), transparent 55%);
            pointer-events: none;
        }

        .pm-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px;
        }

        .pm-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .pm-card {
            background: rgba(34, 45, 59, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            padding: 16px;
            display: grid;
            gap: 12px;
            min-height: 180px;
            box-shadow: 0 16px 30px rgba(0, 0, 0, 0.35);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: cardAppear 0.6s ease-out backwards;
        }

        .pm-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(151, 238, 251, 0.2);
        }

        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .pm-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pm-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            object-fit: cover;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pm-title {
            font-size: 14px;
            font-weight: 600;
            line-height: 1.4;
        }

        .pm-outcomes {
            display: grid;
            gap: 8px;
        }

        .pm-outcome {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
        }

        .pm-outcome .yes {
            color: var(--success);
            background: rgba(47, 227, 127, 0.15);
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .pm-outcome .yes:hover {
            background: rgba(47, 227, 127, 0.25);
        }

        .pm-outcome .no {
            color: #97eefb;
            background: rgba(151, 238, 251, 0.15);
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .pm-outcome .no:hover {
            background: rgba(151, 238, 251, 0.25);
        }

        .pm-meta {
            font-size: 12px;
            color: var(--muted);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pm-status {
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--muted);
        }

        .terminal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--muted);
            margin-bottom: 14px;
        }

        .terminal-lines {
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.8;
        }

        .terminal-lines span {
            color: var(--accent);
        }

        section {
            padding: 60px 0;
            border-top: 1px solid var(--border);
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInUp 0.8s ease-out;
        }

        .section-title h2 {
            font-size: clamp(28px, 4vw, 44px);
            letter-spacing: 2px;
            color: var(--text);
        }

        .section-title h2 span {
            color: var(--accent);
        }

        .section-title p {
            color: var(--muted);
            max-width: 720px;
            margin: 18px auto 0;
            line-height: 1.6;
        }

        .compare {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .compare-card {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            min-height: 240px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: cardAppear 0.6s ease-out backwards;
        }

        .compare-card:hover {
            transform: translateY(-4px);
            border-color: rgba(151, 238, 251, 0.2);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .compare-card h3 {
            font-size: 16px;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .compare-card ul {
            list-style: none;
            margin-top: 18px;
            display: grid;
            gap: 12px;
            color: var(--muted);
            font-size: 14px;
        }

        .compare-card li::before {
            content: 'â€¢';
            color: var(--accent);
            margin-right: 8px;
        }

        .live-markets {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 24px;
        }

        .live-chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            text-transform: uppercase;
            color: var(--muted);
        }

        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .market-card {
            background: var(--panel-strong);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 20px;
            display: grid;
            gap: 14px;
            min-height: 220px;
            box-shadow: 0 16px 30px rgba(0, 0, 0, 0.35);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .market-card::before {
            display: none;
        }

        .market-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(151, 238, 251, 0.2);
        }

        .market-card:hover::before {
            opacity: 1;
        }

        .market-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .market-title {
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .market-price {
            font-size: 22px;
            color: var(--accent);
            font-weight: 700;
        }

        .price-change {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 999px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .price-change.positive {
            color: var(--success);
            background: rgba(47, 227, 127, 0.15);
        }

        .price-change.negative {
            color: var(--danger);
            background: rgba(255, 77, 77, 0.15);
        }

        .market-badges {
            display: flex;
            gap: 10px;
            align-items: center;
            font-size: 11px;
            color: var(--muted);
        }

        .chance {
            margin-left: auto;
            background: rgba(255, 255, 255, 0.08);
            padding: 6px 10px;
            border-radius: 999px;
            font-size: 12px;
        }

        .pill-up {
            background: rgba(47, 227, 127, 0.15);
            color: var(--success);
            padding: 8px 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }

        .pill-down {
            background: rgba(255, 77, 77, 0.15);
            color: var(--danger);
            padding: 8px 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }

        .market-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            font-size: 12px;
            color: var(--muted);
        }

        .market-stat {
            background: rgba(0, 0, 0, 0.35);
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.06);
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 30px;
            text-align: center;
        }

        .stat-item {
            animation: fadeInUp 0.8s ease-out backwards;
            transition: transform 0.3s ease;
        }

        .stat-item:nth-child(1) { animation-delay: 0.1s; }
        .stat-item:nth-child(2) { animation-delay: 0.2s; }
        .stat-item:nth-child(3) { animation-delay: 0.3s; }
        .stat-item:nth-child(4) { animation-delay: 0.4s; }

        .stat-item:hover {
            transform: scale(1.1);
        }

        .stat-item h3 {
            font-size: clamp(24px, 3vw, 38px);
            color: var(--accent);
        }

        .stat-item p {
            color: var(--muted);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
        }

        .feature-card {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 22px;
            min-height: 200px;
        }

        .feature-card h4 {
            margin-bottom: 12px;
        }

        .feature-card p {
            color: var(--muted);
            line-height: 1.6;
            font-size: 14px;
        }

        .cta {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 60px 24px;
            text-align: center;
        }

        .cta h2 {
            font-size: clamp(28px, 4vw, 52px);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .cta p {
            color: var(--muted);
            margin: 16px auto 24px;
            max-width: 520px;
        }

        footer {
            text-align: center;
            padding: 40px 0;
            font-size: 12px;
            color: var(--muted);
            border-top: 1px solid var(--border);
        }

        @media (max-width: 900px) {
            .hero {
                grid-template-columns: 1fr;
            }

            nav ul {
                display: none;
            }
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-container {
            background: linear-gradient(180deg, rgba(11, 14, 16, 0.98), rgba(9, 11, 13, 0.95));
            border: 1px solid var(--border);
            border-radius: 20px;
            width: min(1400px, 95vw);
            max-height: 95vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 100px rgba(151, 238, 251, 0.1);
            position: relative;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid var(--border);
            background: rgba(0, 0, 0, 0.4);
            flex-shrink: 0;
        }

        .modal-title-row {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 12px;
        }

        .modal-title-section {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            flex: 1;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 0.3px;
            color: var(--text);
            line-height: 1.3;
            margin-bottom: 8px;
        }

        .modal-meta-row {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
            font-size: 12px;
            color: var(--muted);
        }

        .modal-meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .modal-meta-label {
            color: var(--muted);
        }

        .modal-meta-value {
            color: var(--text);
            font-weight: 600;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 10px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .status-badge.live {
            background: rgba(47, 227, 127, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-badge.ended {
            background: rgba(255, 77, 77, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .modal-badge {
            background: var(--chip);
            border: 1px solid rgba(151, 238, 251, 0.3);
            color: var(--accent);
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 10px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .modal-close {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.03);
            color: var(--muted);
            font-size: 24px;
            cursor: pointer;
            display: grid;
            place-items: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 77, 77, 0.2);
            border-color: var(--danger);
            color: var(--danger);
            transform: rotate(90deg);
        }

        .modal-body {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 0;
            overflow: hidden;
            flex: 1;
        }

        .modal-chart-section {
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chart-controls {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 8px;
        }

        .timeframe-btn {
            padding: 6px 14px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--muted);
            font-size: 11px;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .timeframe-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .timeframe-btn.active {
            background: var(--accent);
            color: var(--bg);
            border-color: var(--accent);
        }

        .modal-chart-container {
            flex: 1;
            background: rgba(0, 0, 0, 0.5);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .modal-chart-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .chart-placeholder {
            text-align: center;
            color: var(--muted);
            padding: 40px;
        }

        .chart-placeholder-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        .modal-sidebar {
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            max-height: calc(95vh - 150px);
        }

        .sidebar-section {
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .sidebar-section:last-child {
            border-bottom: none;
        }

        .sidebar-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--muted);
            margin-bottom: 16px;
            font-weight: 600;
        }

        .outcome-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .outcome-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .outcome-item:hover {
            border-color: rgba(151, 238, 251, 0.4);
            background: rgba(0, 0, 0, 0.6);
        }

        .outcome-name {
            font-size: 13px;
            font-weight: 500;
            color: var(--text);
        }

        .outcome-price {
            font-size: 18px;
            font-weight: 700;
        }

        .outcome-price.yes {
            color: var(--success);
        }

        .outcome-price.no {
            color: #97eefb;
        }

        .trade-btn {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, #97eefb, #6dd5e8);
            color: #050505;
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 12px;
        }

        .trade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(151, 238, 251, 0.4);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
        }

        .stat-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--muted);
            margin-bottom: 6px;
        }

        .stat-value {
            font-size: 15px;
            font-weight: 700;
            color: var(--accent);
        }

        .chart-tabs {
            padding: 16px 20px;
            border-top: 1px solid var(--border);
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 24px;
        }

        .chart-tab {
            font-size: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--muted);
            cursor: pointer;
            padding: 8px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .chart-tab:hover {
            color: var(--text);
        }

        .chart-tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .resolved-banner {
            background: linear-gradient(135deg, rgba(255, 77, 77, 0.2), rgba(255, 77, 77, 0.1));
            border: 1px solid var(--danger);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-bottom: 16px;
        }

        .resolved-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(255, 77, 77, 0.2);
            border: 2px solid var(--danger);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-size: 24px;
            color: var(--danger);
        }

        .resolved-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 6px;
        }

        .resolved-text {
            font-size: 13px;
            color: var(--muted);
        }

        .pm-card {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pm-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), 0 0 30px rgba(151, 238, 251, 0.2);
            border-color: rgba(151, 238, 251, 0.3);
        }

        /* Category Navigation */
        .category-nav {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .category-list {
            display: flex;
            gap: 28px;
            overflow-x: auto;
            padding: 12px 0;
            scrollbar-width: none;
        }

        .category-list::-webkit-scrollbar {
            display: none;
        }

        .category-item {
            font-size: 13px;
            letter-spacing: 0.5px;
            color: var(--muted);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            padding: 8px 0;
            border-bottom: 2px solid transparent;
            font-weight: 500;
            position: relative;
        }

        .category-item:hover {
            color: var(--text);
        }

        .category-item.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .category-item.trending::before {
            content: 'ðŸ“ˆ';
            margin-right: 6px;
        }

        /* Tag Pills */
        .tag-container {
            margin-bottom: 24px;
        }

        .tag-list {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tag-pill {
            padding: 8px 16px;
            border-radius: 999px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.03);
            color: var(--muted);
            font-size: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .tag-pill:hover {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(151, 238, 251, 0.1);
        }

        .tag-pill.active {
            background: var(--accent);
            color: var(--bg);
            border-color: var(--accent);
        }

        /* Trading Section */
        .trading-section {
            padding: 80px 0;
            position: relative;
        }

        .trading-grid {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 60px;
            align-items: center;
        }

        .trading-content h2 {
            font-size: clamp(36px, 5vw, 56px);
            line-height: 1.1;
            margin-bottom: 24px;
            letter-spacing: 1px;
        }

        .trading-content h2 span {
            color: var(--accent);
            text-shadow: 0 0 30px rgba(151, 238, 251, 0.5);
        }

        .trading-content .subtitle {
            font-size: 16px;
            line-height: 1.7;
            color: var(--muted);
            margin-bottom: 32px;
            max-width: 520px;
        }

        .feature-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 15px;
            color: var(--text);
            animation: fadeInLeft 0.6s ease-out backwards;
        }

        .feature-item:nth-child(1) { animation-delay: 0.1s; }
        .feature-item:nth-child(2) { animation-delay: 0.2s; }
        .feature-item:nth-child(3) { animation-delay: 0.3s; }
        .feature-item:nth-child(4) { animation-delay: 0.4s; }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .check-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(151, 238, 251, 0.1);
            border: 2px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            color: var(--accent);
            font-size: 14px;
            font-weight: bold;
        }

        .trading-demo {
            background: linear-gradient(180deg, rgba(11, 14, 16, 0.95), rgba(9, 11, 13, 0.9));
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 0;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideInRight 0.8s ease-out backwards;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .chart-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.4);
        }

        .chart-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: var(--text);
            font-weight: 600;
        }

        .live-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent);
            box-shadow: 0 0 10px var(--accent);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.2);
            }
        }

        .chart-timeframes {
            display: flex;
            gap: 6px;
        }

        .tf-btn {
            padding: 4px 10px;
            border-radius: 4px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--muted);
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tf-btn:hover {
            color: var(--text);
            border-color: var(--accent);
        }

        .tf-btn.active {
            background: var(--accent);
            color: var(--bg);
            border-color: var(--accent);
        }

        .chart-price {
            padding: 24px;
            background: rgba(0, 0, 0, 0.3);
        }

        .price-display {
            font-size: 42px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 8px;
        }

        .price-change {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 16px;
            font-weight: 600;
        }

        .price-change.positive {
            color: var(--accent);
        }

        .price-change.negative {
            color: var(--text);
        }

        .chart-canvas {
            height: 220px;
            background: linear-gradient(180deg, rgba(151, 238, 251, 0.05), transparent);
            position: relative;
            overflow: hidden;
            padding: 20px;
        }

        .chart-line {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            fill: none;
            stroke: var(--accent);
            stroke-width: 2;
            filter: drop-shadow(0 0 8px rgba(151, 238, 251, 0.5));
        }

        .chart-grid {
            position: absolute;
            inset: 0;
            display: grid;
            grid-template-rows: repeat(4, 1fr);
        }

        .grid-line {
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .trading-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-top: 1px solid var(--border);
        }

        .order-book,
        .trade-panel {
            padding: 20px;
        }

        .order-book {
            border-right: 1px solid var(--border);
        }

        .panel-header {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--muted);
            margin-bottom: 16px;
            font-weight: 600;
        }

        .order-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            padding: 6px 0;
            font-size: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .order-row:last-child {
            border-bottom: none;
        }

        .order-price {
            font-weight: 600;
        }

        .order-price.sell {
            color: var(--text);
        }

        .order-price.buy {
            color: var(--accent);
        }

        .order-size,
        .order-total {
            color: var(--muted);
            text-align: right;
        }

        .spread-indicator {
            padding: 10px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            text-align: center;
            margin: 12px 0;
            font-size: 11px;
            color: var(--muted);
        }

        .trade-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 16px;
        }

        .trade-btn-yes,
        .trade-btn-no {
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .trade-btn-yes {
            background: rgba(151, 238, 251, 0.1);
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .trade-btn-yes:hover {
            background: var(--accent);
            color: var(--bg);
            transform: translateY(-2px);
        }

        .trade-btn-no {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .trade-btn-no:hover {
            background: var(--text);
            color: var(--bg);
            transform: translateY(-2px);
        }

        .amount-input {
            margin-bottom: 16px;
        }

        .amount-input label {
            display: block;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--muted);
            margin-bottom: 8px;
        }

        .amount-value {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 10px;
        }

        .quick-amounts {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
        }

        .quick-amt {
            padding: 6px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 11px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-amt:hover {
            background: rgba(151, 238, 251, 0.1);
            border-color: var(--accent);
        }

        .potential-return {
            padding: 12px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .potential-return label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--muted);
        }

        .potential-return .value {
            font-size: 16px;
            font-weight: 700;
            color: var(--accent);
        }

        .place-order-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--accent), var(--accent-strong));
            color: var(--bg);
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .place-order-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(151, 238, 251, 0.4);
        }

        @media (max-width: 1024px) {
            .trading-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .trading-panels {
                grid-template-columns: 1fr;
            }

            .order-book {
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
        }

        /* VOLIX Signal Styles */
        .volix-signal-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            border: 1px solid;
        }

        .volix-signal-badge.strong-buy {
            background: rgba(0, 255, 136, 0.15);
            color: #00ff88;
            border-color: #00ff88;
        }

        .volix-signal-badge.buy {
            background: rgba(47, 227, 127, 0.15);
            color: #2fe37f;
            border-color: #2fe37f;
        }

        .volix-signal-badge.hold {
            background: rgba(151, 238, 251, 0.15);
            color: #97eefb;
            border-color: #97eefb;
        }

        .volix-signal-badge.sell {
            background: rgba(255, 176, 32, 0.15);
            color: #ffb020;
            border-color: #ffb020;
        }

        .volix-signal-badge.strong-sell {
            background: rgba(255, 77, 77, 0.15);
            color: #ff4d4d;
            border-color: #ff4d4d;
        }

        /* Live Market Signal Badges */
        .signal-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .signal-badge.long {
            background: rgba(47, 227, 127, 0.2);
            color: #2fe37f;
            border: 1px solid #2fe37f;
        }

        .signal-badge.short {
            background: rgba(255, 77, 77, 0.2);
            color: #ff4d4d;
            border: 1px solid #ff4d4d;
        }

        .market-card.clickable {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .market-card.clickable:hover {
            transform: translateY(-6px);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.5);
            border-color: var(--accent);
        }

        /* Live Market Modal */
        #liveMarketModal .modal-container {
            max-width: 900px;
        }

        .ai-signal-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .ai-signal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .ai-signal-title {
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--accent);
        }

        .trading-levels {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .level-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 14px;
        }

        .level-label {
            font-size: 10px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--muted);
            margin-bottom: 6px;
        }

        .level-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .level-value.entry { color: var(--accent); }
        .level-value.stoploss { color: #ff4d4d; }
        .level-value.tp { color: #2fe37f; }

        .tp-levels-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 12px;
        }

        .tp-item {
            background: rgba(47, 227, 127, 0.05);
            border: 1px solid rgba(47, 227, 127, 0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .tp-label {
            font-size: 10px;
            letter-spacing: 1.5px;
            color: var(--muted);
            margin-bottom: 4px;
        }

        .tp-price {
            font-size: 14px;
            font-weight: 600;
            color: #2fe37f;
        }

        .tp-percent {
            font-size: 10px;
            color: rgba(47, 227, 127, 0.7);
            margin-top: 2px;
        }

        .technical-indicators {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 16px;
        }

        .indicator-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .indicator-label {
            font-size: 10px;
            letter-spacing: 1.5px;
            color: var(--muted);
            margin-bottom: 4px;
        }

        .indicator-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
        }

        .confidence-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 8px 0;
            font-size: 11px;
        }

        .confidence-bar-track {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .confidence-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #97eefb, #67d7e7);
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        .confidence-value {
            font-weight: 700;
            color: #97eefb;
            min-width: 40px;
            text-align: right;
        }

        /* Web3 Wallet Connection Styles */
        .btn-wallet {
            padding: 10px 18px;
            border-radius: 8px;
            border: 1px solid var(--accent);
            background: linear-gradient(135deg, rgba(151, 238, 251, 0.15), rgba(103, 215, 231, 0.1));
            color: var(--accent);
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-wallet:hover {
            background: linear-gradient(135deg, rgba(151, 238, 251, 0.25), rgba(103, 215, 231, 0.2));
            box-shadow: 0 0 25px rgba(151, 238, 251, 0.4);
            transform: translateY(-2px);
        }

        .btn-wallet.connected {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(47, 227, 127, 0.15), rgba(47, 227, 127, 0.1));
            color: var(--success);
        }

        .btn-wallet.connected:hover {
            background: linear-gradient(135deg, rgba(47, 227, 127, 0.25), rgba(47, 227, 127, 0.2));
            box-shadow: 0 0 25px rgba(47, 227, 127, 0.4);
        }

        .wallet-icon {
            width: 16px;
            height: 16px;
        }

        .wallet-address {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
        }

        /* Wallet Modal Styles */
        .wallet-modal {
            position: fixed;
            inset: 0;
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
        }

        .wallet-modal.active {
            display: flex;
        }

        .wallet-modal-content {
            background: linear-gradient(180deg, rgba(15, 18, 22, 0.98), rgba(10, 12, 15, 0.98));
            border: 1px solid var(--border);
            border-radius: 20px;
            width: min(420px, 90vw);
            padding: 32px;
            position: relative;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .wallet-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .wallet-modal-title {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .wallet-modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            color: var(--muted);
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .wallet-modal-close:hover {
            background: rgba(255, 255, 255, 0.15);
            color: var(--text);
        }

        .wallet-options {
            display: grid;
            gap: 12px;
        }

        .wallet-option {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .wallet-option:hover {
            background: rgba(151, 238, 251, 0.08);
            border-color: rgba(151, 238, 251, 0.3);
            transform: translateX(4px);
        }

        .wallet-option-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .wallet-option-icon.metamask {
            background: linear-gradient(135deg, #f6851b, #e2761b);
        }

        .wallet-option-icon.walletconnect {
            background: linear-gradient(135deg, #3b99fc, #2d7dd2);
        }

        .wallet-option-icon.coinbase {
            background: linear-gradient(135deg, #0052ff, #0039b3);
        }

        .wallet-option-icon.phantom {
            background: linear-gradient(135deg, #ab9ff2, #7c3aed);
        }

        .wallet-option-info {
            flex: 1;
        }

        .wallet-option-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .wallet-option-desc {
            font-size: 12px;
            color: var(--muted);
        }

        .wallet-option-arrow {
            color: var(--muted);
            font-size: 18px;
            transition: transform 0.2s ease;
        }

        .wallet-option:hover .wallet-option-arrow {
            transform: translateX(4px);
            color: var(--accent);
        }

        .wallet-connecting {
            text-align: center;
            padding: 40px 20px;
        }

        .wallet-connecting-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        .wallet-cancel-btn {
            margin-top: 20px;
            padding: 10px 24px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--muted);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .wallet-cancel-btn:hover {
            border-color: var(--danger);
            color: var(--danger);
            background: rgba(255, 77, 77, 0.1);
        }

        .notification-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            margin-left: auto;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .notification-close:hover {
            opacity: 1;
        }

        .notification-message {
            flex: 1;
            font-size: 14px;
            color: white;
        }

        .wallet-connected-info {
            text-align: center;
            padding: 20px;
        }

        .wallet-connected-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, rgba(47, 227, 127, 0.2), rgba(47, 227, 127, 0.1));
            border: 2px solid var(--success);
            border-radius: 50%;
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .wallet-connected-address {
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            color: var(--accent);
            background: rgba(151, 238, 251, 0.1);
            padding: 10px 16px;
            border-radius: 8px;
            margin: 12px 0;
        }

        .wallet-connected-network {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--success);
            margin-bottom: 20px;
        }

        .wallet-balance {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .wallet-balance-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 14px;
            text-align: left;
        }

        .wallet-balance-label {
            font-size: 11px;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }

        .wallet-balance-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .wallet-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .wallet-action-btn {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .wallet-action-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent);
        }

        .wallet-action-btn.disconnect {
            border-color: var(--danger);
            color: var(--danger);
        }

        .wallet-action-btn.disconnect:hover {
            background: rgba(255, 77, 77, 0.1);
        }

        .wallet-footer {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            text-align: center;
            font-size: 12px;
            color: var(--muted);
        }

        .wallet-footer a {
            color: var(--accent);
            text-decoration: none;
        }

        .wallet-footer a:hover {
            text-decoration: underline;
        }

        /* Enhanced Footer */
        footer {
            background: var(--bg);
            border-top: 1px solid var(--border);
            padding: 30px 0;
            text-align: center;
            color: var(--muted);
            font-size: 13px;
            letter-spacing: 1px;
            position: relative;
        }
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    
    <!-- Web3 Wallet Connection Modal -->
    <div id="walletModal" class="wallet-modal">
        <div class="wallet-modal-content">
            <div class="wallet-modal-header">
                <div class="wallet-modal-title">Connect Wallet</div>
                <button class="wallet-modal-close" onclick="closeWalletModal()">Ã—</button>
            </div>
            
            <!-- Wallet Selection View -->
            <div id="walletSelectView">
                <div class="wallet-options">
                    <div class="wallet-option" onclick="connectWallet('metamask')">
                        <div class="wallet-option-icon metamask">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" alt="MetaMask" width="28" height="28" style="object-fit: contain;">
                        </div>
                        <div class="wallet-option-info">
                            <div class="wallet-option-name">MetaMask</div>
                            <div class="wallet-option-desc">Connect using browser extension</div>
                        </div>
                        <div class="wallet-option-arrow">â†’</div>
                    </div>
                    <div class="wallet-option" onclick="connectWallet('walletconnect')">
                        <div class="wallet-option-icon walletconnect">
                            <img src="https://avatars.githubusercontent.com/u/37784886?s=200&v=4" alt="WalletConnect" width="28" height="28" style="object-fit: contain; border-radius: 6px;">
                        </div>
                        <div class="wallet-option-info">
                            <div class="wallet-option-name">WalletConnect</div>
                            <div class="wallet-option-desc">Scan with mobile wallet</div>
                        </div>
                        <div class="wallet-option-arrow">â†’</div>
                    </div>
                    <div class="wallet-option" onclick="connectWallet('coinbase')">
                        <div class="wallet-option-icon coinbase">
                            <img src="https://avatars.githubusercontent.com/u/18060234?s=200&v=4" alt="Coinbase" width="28" height="28" style="object-fit: contain; border-radius: 6px;">
                        </div>
                        <div class="wallet-option-info">
                            <div class="wallet-option-name">Coinbase Wallet</div>
                            <div class="wallet-option-desc">Connect using Coinbase</div>
                        </div>
                        <div class="wallet-option-arrow">â†’</div>
                    </div>
                    <div class="wallet-option" onclick="connectWallet('phantom')">
                        <div class="wallet-option-icon phantom">
                            <img src="https://avatars.githubusercontent.com/u/78782331?s=200&v=4" alt="Phantom" width="28" height="28" style="object-fit: contain; border-radius: 6px;">
                        </div>
                        <div class="wallet-option-info">
                            <div class="wallet-option-name">Phantom</div>
                            <div class="wallet-option-desc">Solana & Ethereum wallet</div>
                        </div>
                        <div class="wallet-option-arrow">â†’</div>
                    </div>
                </div>
                <div class="wallet-footer">
                    By connecting, you agree to our <a href="#">Terms of Service</a>
                </div>
            </div>
            
            <!-- Connecting View -->
            <div id="walletConnectingView" style="display: none;">
                <div class="wallet-connecting">
                    <div class="wallet-connecting-spinner"></div>
                    <div style="font-size: 16px; margin-bottom: 8px;">Connecting...</div>
                    <div style="color: var(--muted); font-size: 13px;" id="connectingWalletName">Waiting for MetaMask</div>
                    <button class="wallet-cancel-btn" onclick="cancelWalletConnection()">Cancel</button>
                </div>
            </div>
            
            <!-- Connected View -->
            <div id="walletConnectedView" style="display: none;">
                <div class="wallet-connected-info">
                    <div class="wallet-connected-icon">âœ“</div>
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 4px;">Wallet Connected</div>
                    <div class="wallet-connected-address" id="connectedAddress">0x0000...0000</div>
                    <div class="wallet-connected-network">
                        <span class="status-dot"></span>
                        <span id="connectedNetwork">Ethereum Mainnet</span>
                    </div>
                    <div class="wallet-balance">
                        <div class="wallet-balance-item">
                            <div class="wallet-balance-label">ETH Balance</div>
                            <div class="wallet-balance-value" id="ethBalance">0.00 ETH</div>
                        </div>
                        <div class="wallet-balance-item">
                            <div class="wallet-balance-label">USD Value</div>
                            <div class="wallet-balance-value" id="usdValue">$0.00</div>
                        </div>
                    </div>
                    <div class="wallet-actions">
                        <button class="wallet-action-btn" onclick="copyAddress()">ðŸ“‹ Copy Address</button>
                        <button class="wallet-action-btn disconnect" onclick="disconnectWallet()">Disconnect</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for Chart Detail -->
    <div id="chartModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title-row">
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                            <img id="modalIcon" class="pm-icon" src="" alt="" style="display:none; width: 40px; height: 40px;" />
                            <div class="modal-title" id="modalTitle">Market Details</div>
                        </div>
                        <div class="modal-meta-row">
                            <div class="modal-meta-item">
                                <span class="modal-meta-label">Vol</span>
                                <span class="modal-meta-value" id="modalVolume">$0</span>
                            </div>
                            <div class="modal-meta-item">
                                <span class="modal-meta-label">24h</span>
                                <span class="modal-meta-value" id="modal24h">$0.00</span>
                            </div>
                            <div class="modal-meta-item">
                                <span class="modal-meta-label">OI</span>
                                <span class="modal-meta-value" id="modalOI">$0.00</span>
                            </div>
                            <span class="status-badge live" id="modalStatus">â— Live</span>
                        </div>
                    </div>
                    <button class="modal-close" onclick="closeChartModal()">Ã—</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="modal-chart-section">
                    <div class="chart-controls">
                        <button class="timeframe-btn">1M</button>
                        <button class="timeframe-btn">1H</button>
                        <button class="timeframe-btn">6H</button>
                        <button class="timeframe-btn active">1D</button>
                        <button class="timeframe-btn">1W</button>
                    </div>
                    <div class="modal-chart-container">
                    </div>
                    <div class="chart-tabs">
                        <div class="chart-tab active">Positions</div>
                        <div class="chart-tab">Orders</div>
                        <div class="chart-tab">Activity</div>
                        <div class="chart-tab">Rules</div>
                        <div class="chart-tab">Similar Markets</div>
                        <div class="chart-tab">Comments</div>
                    </div>
                </div>
                <div class="modal-sidebar">
                    <div class="sidebar-section" id="resolvedSection" style="display: none;">
                        <div class="resolved-banner">
                            <div class="resolved-icon">âœ“</div>
                            <div class="resolved-title">Market Resolved</div>
                            <div class="resolved-text" id="resolvedText">This market has been resolved.</div>
                        </div>
                    </div>
                    <div class="sidebar-section">
                        <div class="sidebar-title">Market Outcomes</div>
                        <div class="outcome-list" id="outcomeList">
                            <!-- Outcomes will be injected here -->
                        </div>
                        <button class="trade-btn" onclick="showComingSoon()">
                            ðŸ“ˆ Trade on VOLIX AI
                        </button>
                    </div>
                    <div class="sidebar-section">
                        <div class="sidebar-title">Market Stats</div>
                        <div class="stats-grid" id="statsGrid">
                            <!-- Stats will be injected here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Live Market Detail Modal -->
    <div id="liveMarketModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title-row">
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 8px;">
                            <div class="modal-title" id="lmModalTitle">BTC/USDT</div>
                            <span class="signal-badge long" id="lmSignalBadge">LONG</span>
                        </div>
                        <div class="modal-meta-row">
                            <div class="modal-meta-item">
                                <span class="modal-meta-label">Price</span>
                                <span class="modal-meta-value" id="lmPrice">$0</span>
                            </div>
                            <div class="modal-meta-item">
                                <span class="modal-meta-label">24h</span>
                                <span class="modal-meta-value" id="lm24h">0.00%</span>
                            </div>
                            <div class="modal-meta-item">
                                <span class="modal-meta-label">Confidence</span>
                                <span class="modal-meta-value" id="lmConfidence">0%</span>
                            </div>
                            <span class="status-badge live">â— LIVE</span>
                        </div>
                    </div>
                    <button class="modal-close" onclick="closeLiveMarketModal()">Ã—</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="modal-chart-section">
                    <div class="chart-controls">
                        <button class="timeframe-btn">1M</button>
                        <button class="timeframe-btn">15M</button>
                        <button class="timeframe-btn">1H</button>
                        <button class="timeframe-btn active">4H</button>
                        <button class="timeframe-btn">1D</button>
                    </div>
                    <div class="modal-chart-container" id="lmChartContainer">
                    </div>
                </div>
                <div class="modal-sidebar">
                    <div class="ai-signal-section">
                        <div class="ai-signal-header">
                            <span class="ai-signal-title">âš¡ AI Signal Details</span>
                        </div>
                        <div class="trading-levels">
                            <div class="level-item">
                                <div class="level-label">Entry Price</div>
                                <div class="level-value entry" id="lmEntry">$0.0000</div>
                            </div>
                            <div class="level-item">
                                <div class="level-label">Stop Loss</div>
                                <div class="level-value stoploss" id="lmStoploss">$0.0000</div>
                            </div>
                        </div>
                        <div class="tp-levels-grid">
                            <div class="tp-item">
                                <div class="tp-label">TP1</div>
                                <div class="tp-price" id="lmTp1">$0.0000</div>
                                <div class="tp-percent" id="lmTp1Pct">+0%</div>
                            </div>
                            <div class="tp-item">
                                <div class="tp-label">TP2</div>
                                <div class="tp-price" id="lmTp2">$0.0000</div>
                                <div class="tp-percent" id="lmTp2Pct">+0%</div>
                            </div>
                            <div class="tp-item">
                                <div class="tp-label">TP3</div>
                                <div class="tp-price" id="lmTp3">$0.0000</div>
                                <div class="tp-percent" id="lmTp3Pct">+0%</div>
                            </div>
                        </div>
                    </div>
                    <div class="sidebar-section">
                        <div class="sidebar-title">Technical Indicators</div>
                        <div class="technical-indicators">
                            <div class="indicator-item">
                                <div class="indicator-label">RSI</div>
                                <div class="indicator-value" id="lmRsi">â€”</div>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-label">Momentum</div>
                                <div class="indicator-value" id="lmMomentum">â€”</div>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-label">Volatility</div>
                                <div class="indicator-value" id="lmVolatility">â€”</div>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-label">R/R Ratio</div>
                                <div class="indicator-value" id="lmRR">â€”</div>
                            </div>
                        </div>
                    </div>
                    <button class="trade-btn" onclick="showComingSoon()" style="margin-top: 16px;">
                        ðŸ“ˆ Trade on VOLIX AI
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <header>
        <div class="container nav">
            <div class="brand">
                <div class="brand-badge">
                    <picture>
                        <source srcset="volix.webp" type="image/webp">
                        <img src="volixai.png" alt="VOLIX AI Logo" />
                    </picture>
                </div>
                <span>VOLIX AI</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#problem" style="color: inherit; text-decoration: none;">THE PROBLEM</a></li>
                    <li><a href="#features" style="color: inherit; text-decoration: none;">FEATURES</a></li>
                    <li><a href="#comparison" style="color: inherit; text-decoration: none;">COMPARISON</a></li>
                    <li><a href="#faq" style="color: inherit; text-decoration: none;">FAQ</a></li>
                </ul>
            </nav>
            <div class="nav-right">
                <span><span class="status-dot"></span> SYSTEM: ONLINE</span>
                <button class="btn-wallet" id="connectWalletBtn" onclick="openWalletModal()">
                    <svg class="wallet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 7V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2"/>
                        <rect x="15" y="9" width="6" height="6" rx="1"/>
                        <circle cx="18" cy="12" r="1" fill="currentColor"/>
                    </svg>
                    <span id="walletBtnText">CONNECT WALLET</span>
                </button>
            </div>
        </div>
    </header>

    <main>
        <section class="hero" style="background: #0c0e10;">
            <div class="container">
                <h1>THE MOST <span>PERFORMANT</span>PREDICTION MARKET TERMINAL</h1>
                <p>
                    Unified terminal for Polymarket and Kalshi with real-time data and seamless trading
                    <br />
                    <strong>No juggling accounts. No slow refreshes.</strong>
                </p>
                <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
                    <a href="#live" class="btn" style="display: inline-flex; align-items: center; gap: 8px; text-decoration: none;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18"/><path d="M18 9l-5 5-4-4-3 3"/>
                        </svg>
                        PREDICTION MARKET
                    </a>
                    <a href="#predictions" class="btn" style="display: inline-flex; align-items: center; gap: 8px; text-decoration: none;" onclick="document.querySelector('.live-markets').scrollIntoView({behavior: 'smooth'}); return false;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
                        </svg>
                        LIVE MARKET
                    </a>
                    <a href="https://x.com/volixaiproject" target="_blank" rel="noopener noreferrer" class="btn" style="display: inline-flex; align-items: center; gap: 8px; text-decoration: none; background: transparent; border: 1px solid var(--border);">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                        TWITTER
                    </a>
                    <a href="https://t.me/VolixAIportal" target="_blank" rel="noopener noreferrer" class="btn" style="display: inline-flex; align-items: center; gap: 8px; text-decoration: none; background: transparent; border: 1px solid var(--border);">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                        </svg>
                        TELEGRAM
                    </a>
                </div>
            </div>
            <div class="container">
                <div class="terminal">
                    <div class="terminal-header">
                        <span>SECURE_OS</span>
                        <span>VOLIX_AI_V2.4</span>
                    </div>
                    <div class="terminal-lines">
                        <div><span>NETWORK_STATUS:</span> ONLINE</div>
                        <div><span>SEARCHING_ALPHA_STREAMS...</span></div>
                        <div>analyzing_market_1024 ... [OK]</div>
                        <div>analyzing_market_1025 ... [OK]</div>
                        <div>analyzing_market_1026 ... [OK]</div>
                        <div>analyzing_market_1027 ... [OK]</div>
                        <div>analyzing_market_1028 ... [OK]</div>
                        <div style="margin-top: 20px; color: var(--accent);">LIVE SIGNALS</div>
                        <div>BTC &gt; 100K &nbsp;&nbsp;&nbsp; 78%</div>
                        <div>ETH ETF &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 92%</div>
                        <div>MARCH CUT &nbsp;&nbsp;&nbsp; 58%</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="problem" style="background: #0c0e10; padding: 80px 0;">
            <div class="container">
                <div class="section-title">
                    <div class="pill">THE PROBLEM</div>
                    <h2>WHY CHOOSE <span>VOLIX AI</span>?</h2>
                    <p>
                        Prediction markets are exploding. Billions in volume. Odds sharper than any poll. But the trading
                        experience hasn't caught up. <strong>The current setup is too slow, too scattered, and built for a desktop era.</strong>
                    </p>
                </div>
                <div class="compare">
                    <div class="compare-card">
                        <h3>THE OLD WAY</h3>
                        <p style="color: var(--muted); text-transform: uppercase; font-size: 11px; letter-spacing: 2px;">DESKTOP ERA</p>
                        <ul>
                            <li>Juggling multiple platform accounts</li>
                            <li>Slow refreshes, missed opportunities</li>
                            <li>Desktop-only, glued to laptop</li>
                        </ul>
                        <div style="margin-top: 24px; color: var(--danger); font-size: 12px; letter-spacing: 2px; text-transform: uppercase;">Result: Missed opportunities</div>
                    </div>
                    <div class="compare-card">
                        <h3>THE VOLIX WAY</h3>
                        <p style="color: var(--muted); text-transform: uppercase; font-size: 11px; letter-spacing: 2px;">FRICTIONLESS ERA</p>
                        <ul>
                            <li>One unified WebApps interface</li>
                            <li>12ms execution, real-time data</li>
                            <li>Trade anywhere, anytime</li>
                        </ul>
                        <div style="margin-top: 24px; color: var(--accent); font-size: 12px; letter-spacing: 2px; text-transform: uppercase;">Result: Trade ahead of the crowd</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" style="background: #0c0e10; padding: 80px 0; position: relative; overflow: hidden;">
            <div class="container" style="position: relative; z-index: 1;">
                <div style="text-align: center; margin-bottom: 60px;">
                    <div style="display: inline-block; background: rgba(151, 238, 251, 0.1); border: 1px solid rgba(151, 238, 251, 0.3); border-radius: 24px; padding: 8px 16px; margin-bottom: 16px; font-size: 12px; letter-spacing: 2px; text-transform: uppercase; color: var(--accent);">CORE FEATURES</div>
                    <h2 style="font-size: 48px; margin: 24px 0; letter-spacing: -1px;">Platform Superpowers</h2>
                    <p style="font-size: 18px; color: var(--muted); max-width: 600px; margin: 0 auto;">Everything you need for professional prediction market trading in one unified platform</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; grid-auto-rows: auto;">
                    <!-- Real-time Data -->
                    <div style="background: rgba(12, 14, 16, 0.4); border: 1px solid rgba(151, 238, 251, 0.1); border-radius: 16px; padding: 32px; backdrop-filter: blur(10px); transition: all 0.3s ease; cursor: pointer; animation: slideInUp 0.6s ease-out 0.1s both;" 
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.borderColor='rgba(151, 238, 251, 0.3)'; this.style.backgroundColor='rgba(12, 14, 16, 0.6)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.borderColor='rgba(151, 238, 251, 0.1)'; this.style.backgroundColor='rgba(12, 14, 16, 0.4)'">
                        <div style="width: 56px; height: 56px; background: #61eefb; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; position: relative; overflow: hidden;">
                            <div style="position: absolute; inset: 2px; background: rgba(12, 14, 16, 0.8); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <span style="width: 20px; height: 20px; border: 2px solid #61eefb; border-radius: 3px; position: relative;">
                                    <span style="position: absolute; width: 6px; height: 3px; background: #61eefb; top: 6px; left: 3px;"></span>
                                    <span style="position: absolute; width: 3px; height: 3px; background: #61eefb; top: 4px; right: 4px;"></span>
                                </span>
                            </div>
                        </div>
                        <h3 style="font-size: 20px; margin-bottom: 12px; letter-spacing: -0.5px;">Real-time Data</h3>
                        <p style="color: var(--muted); line-height: 1.6; font-size: 14px;">Live prices & orderbook updates stream instantly to your screen</p>
                    </div>

                    <!-- Fast Execution -->
                    <div style="background: rgba(12, 14, 16, 0.4); border: 1px solid rgba(151, 238, 251, 0.1); border-radius: 16px; padding: 32px; backdrop-filter: blur(10px); transition: all 0.3s ease; cursor: pointer; animation: slideInUp 0.6s ease-out 0.2s both;"
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.borderColor='rgba(151, 238, 251, 0.3)'; this.style.backgroundColor='rgba(12, 14, 16, 0.6)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.borderColor='rgba(151, 238, 251, 0.1)'; this.style.backgroundColor='rgba(12, 14, 16, 0.4)'">
                        <div style="width: 56px; height: 56px; background: #61eefb; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; position: relative; overflow: hidden;">
                            <div style="position: absolute; inset: 2px; background: rgba(12, 14, 16, 0.8); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <span style="width: 20px; height: 3px; background: #61eefb;"></span>
                            </div>
                        </div>
                        <h3 style="font-size: 20px; margin-bottom: 12px; letter-spacing: -0.5px;">Fast Execution</h3>
                        <p style="color: var(--muted); line-height: 1.6; font-size: 14px;">12ms order execution speed for competitive advantage</p>
                    </div>

                    <!-- Portfolio Tracking -->
                    <div style="background: rgba(12, 14, 16, 0.4); border: 1px solid rgba(151, 238, 251, 0.1); border-radius: 16px; padding: 32px; backdrop-filter: blur(10px); transition: all 0.3s ease; cursor: pointer; animation: slideInUp 0.6s ease-out 0.3s both;"
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.borderColor='rgba(151, 238, 251, 0.3)'; this.style.backgroundColor='rgba(12, 14, 16, 0.6)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.borderColor='rgba(151, 238, 251, 0.1)'; this.style.backgroundColor='rgba(12, 14, 16, 0.4)'">
                        <div style="width: 56px; height: 56px; background: #61eefb; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; position: relative; overflow: hidden;">
                            <div style="position: absolute; inset: 2px; background: rgba(12, 14, 16, 0.8); border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 2px;">
                                <span style="width: 12px; height: 2px; background: #61eefb;"></span>
                                <span style="width: 16px; height: 2px; background: #61eefb;"></span>
                                <span style="width: 10px; height: 2px; background: #61eefb;"></span>
                            </div>
                        </div>
                        <h3 style="font-size: 20px; margin-bottom: 12px; letter-spacing: -0.5px;">Portfolio Tracking</h3>
                        <p style="color: var(--muted); line-height: 1.6; font-size: 14px;">Monitor all positions, P&L, and risk metrics in one dashboard</p>
                    </div>

                    <!-- Market Discovery -->
                    <div style="background: rgba(12, 14, 16, 0.4); border: 1px solid rgba(151, 238, 251, 0.1); border-radius: 16px; padding: 32px; backdrop-filter: blur(10px); transition: all 0.3s ease; cursor: pointer; animation: slideInUp 0.6s ease-out 0.4s both;"
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.borderColor='rgba(151, 238, 251, 0.3)'; this.style.backgroundColor='rgba(12, 14, 16, 0.6)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.borderColor='rgba(151, 238, 251, 0.1)'; this.style.backgroundColor='rgba(12, 14, 16, 0.4)'">
                        <div style="width: 56px; height: 56px; background: #61eefb; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; position: relative; overflow: hidden;">
                            <div style="position: absolute; inset: 2px; background: rgba(12, 14, 16, 0.8); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <span style="width: 18px; height: 18px; border: 2px solid #61eefb; border-radius: 50%; position: relative;">
                                    <span style="position: absolute; width: 2px; height: 2px; background: #61eefb; bottom: -4px; right: -4px;"></span>
                                </span>
                            </div>
                        </div>
                        <h3 style="font-size: 20px; margin-bottom: 12px; letter-spacing: -0.5px;">Market Discovery</h3>
                        <p style="color: var(--muted); line-height: 1.6; font-size: 14px;">Search, filter, and find prediction markets across all platforms</p>
                    </div>

                    <!-- Secure Wallets -->
                    <div style="background: rgba(12, 14, 16, 0.4); border: 1px solid rgba(151, 238, 251, 0.1); border-radius: 16px; padding: 32px; backdrop-filter: blur(10px); transition: all 0.3s ease; cursor: pointer; animation: slideInUp 0.6s ease-out 0.5s both;"
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.borderColor='rgba(151, 238, 251, 0.3)'; this.style.backgroundColor='rgba(12, 14, 16, 0.6)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.borderColor='rgba(151, 238, 251, 0.1)'; this.style.backgroundColor='rgba(12, 14, 16, 0.4)'">
                        <div style="width: 56px; height: 56px; background: #61eefb; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; position: relative; overflow: hidden;">
                            <div style="position: absolute; inset: 2px; background: rgba(12, 14, 16, 0.8); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <span style="width: 16px; height: 20px; border: 2px solid #61eefb; border-radius: 3px; position: relative;">
                                    <span style="position: absolute; width: 8px; height: 8px; border: 1.5px solid #61eefb; border-radius: 50%; top: -6px; left: 50%; transform: translateX(-50%);"></span>
                                </span>
                            </div>
                        </div>
                        <h3 style="font-size: 20px; margin-bottom: 12px; letter-spacing: -0.5px;">Secure Wallets</h3>
                        <p style="color: var(--muted); line-height: 1.6; font-size: 14px;">AES-256 encrypted keys - your funds stay protected always</p>
                    </div>

                    <!-- Zero Fees -->
                    <div style="background: rgba(12, 14, 16, 0.4); border: 1px solid rgba(151, 238, 251, 0.1); border-radius: 16px; padding: 32px; backdrop-filter: blur(10px); transition: all 0.3s ease; cursor: pointer; animation: slideInUp 0.6s ease-out 0.6s both;"
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.borderColor='rgba(151, 238, 251, 0.3)'; this.style.backgroundColor='rgba(12, 14, 16, 0.6)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.borderColor='rgba(151, 238, 251, 0.1)'; this.style.backgroundColor='rgba(12, 14, 16, 0.4)'">
                        <div style="width: 56px; height: 56px; background: #61eefb; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; position: relative; overflow: hidden;">
                            <div style="position: absolute; inset: 2px; background: rgba(12, 14, 16, 0.8); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; color: #61eefb;">0</div>
                        </div>
                        <h3 style="font-size: 20px; margin-bottom: 12px; letter-spacing: -0.5px;">0% Fees</h3>
                        <p style="color: var(--muted); line-height: 1.6; font-size: 14px;">Zero trading fees - keep 100% of your profits</p>
                    </div>
                </div>
            </div>
        </section>

        <style>
            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>

        <section class="trading-section" style="background: #0c0e10;">
            <div class="container">
                <div class="trading-grid">
                    <div class="trading-content">
                        <h2>Trade with <span>Precision</span></h2>
                        <p class="subtitle">
                            Professional AI-powered crypto price prediction tools at your fingertips. 
                            Our advanced machine learning models analyze market patterns, sentiment, and technical indicators 
                            to deliver accurate price forecasts with real-time execution.
                        </p>
                        <div class="feature-list">
                            <div class="feature-item">
                                <div class="check-icon">âœ“</div>
                                <span>Real-time price charts with AI prediction overlays</span>
                            </div>
                            <div class="feature-item">
                                <div class="check-icon">âœ“</div>
                                <span>Machine learning models trained on billions of data points</span>
                            </div>
                            <div class="feature-item">
                                <div class="check-icon">âœ“</div>
                                <span>One-click market and limit orders with 12ms execution</span>
                            </div>
                            <div class="feature-item">
                                <div class="check-icon">âœ“</div>
                                <span>Position tracking with P&L calculations and risk management</span>
                            </div>
                        </div>
                    </div>

                    <div class="trading-demo">
                        <div class="chart-header">
                            <div class="chart-title">
                                <div class="live-indicator"></div>
                                <span id="tradingPair">BTC/USD</span> Price Chart
                            </div>
                            <div class="chart-timeframes">
                                <button class="tf-btn" data-tf="1h">1H</button>
                                <button class="tf-btn active" data-tf="1d">1D</button>
                                <button class="tf-btn" data-tf="1w">1W</button>
                            </div>
                        </div>

                        <div class="chart-price">
                            <div class="price-display" id="btcPrice">$0.00</div>
                            <div class="price-change positive" id="btcChange">
                                <span id="changeArrow">â–²</span>
                                <span id="changePercent">0.0%</span>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 16px; font-size: 12px;">
                                <div>
                                    <div style="color: var(--muted); margin-bottom: 4px;">Volume</div>
                                    <div style="color: var(--text); font-weight: 600;" id="btcVolume">$0</div>
                                </div>
                                <div>
                                    <div style="color: var(--muted); margin-bottom: 4px;">24h High</div>
                                    <div style="color: var(--text); font-weight: 600;" id="btcHigh">$0.00</div>
                                </div>
                                <div>
                                    <div style="color: var(--muted); margin-bottom: 4px;">24h Low</div>
                                    <div style="color: var(--text); font-weight: 600;" id="btcLow">$0.00</div>
                                </div>
                            </div>
                        </div>

                        <div class="chart-canvas" id="chartCanvas">
                            <div class="chart-grid">
                                <div class="grid-line"></div>
                                <div class="grid-line"></div>
                                <div class="grid-line"></div>
                                <div class="grid-line"></div>
                            </div>
                            <svg width="100%" height="100%" id="priceChart">
                                <polyline class="chart-line" id="chartLine" points=""></polyline>
                            </svg>
                        </div>

                        <div class="trading-panels">
                            <div class="order-book">
                                <div class="panel-header">Order Book</div>
                                <div class="order-row" style="color: var(--muted); font-size: 10px; text-transform: uppercase; letter-spacing: 1px;">
                                    <div>Price</div>
                                    <div style="text-align: right;">Size</div>
                                    <div style="text-align: right;">Total</div>
                                </div>
                                <div id="sellOrders">
                                    <!-- Sell orders will be populated here -->
                                </div>
                                <div class="spread-indicator" id="spreadIndicator">
                                    Loading... <span style="color: var(--muted);">spread: $0</span>
                                </div>
                                <div id="buyOrders">
                                    <!-- Buy orders will be populated here -->
                                </div>
                            </div>

                            <div class="trade-panel">
                                <div class="panel-header">
                                    <span style="color: var(--accent);">PT</span> Trade Panel 
                                    <span style="float: right; color: var(--accent); font-size: 10px;">â— Live</span>
                                </div>
                                <div class="trade-buttons">
                                    <button class="trade-btn-yes" id="buyBtn">BUY <span id="buyPrice">$0</span></button>
                                    <button class="trade-btn-no" id="sellBtn">SELL <span id="sellPrice">$0</span></button>
                                </div>
                                <div class="amount-input">
                                    <label>Amount</label>
                                    <div class="amount-value" id="tradeAmount">$ 100.00</div>
                                    <div class="quick-amounts">
                                        <div class="quick-amt" onclick="setTradeAmount(10)">$10</div>
                                        <div class="quick-amt" onclick="setTradeAmount(50)">$50</div>
                                        <div class="quick-amt" onclick="setTradeAmount(100)">$100</div>
                                        <div class="quick-amt" onclick="setTradeAmount(500)">Max</div>
                                    </div>
                                </div>
                                <div class="potential-return">
                                    <label>Potential Return</label>
                                    <div class="value" id="potentialReturn">+$0.00</div>
                                </div>
                                <button class="place-order-btn" id="placeOrderBtn">Place Order</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="live" style="background: #0c0e10;">
            <div class="container">
                <div class="pm-header">
                    <div style="display: flex; align-items: center; gap: 24px; width: 100%;">
                        <h2 style="margin: 0;">Prediction Markets <span id="marketCount" style="color: var(--muted); font-size: 14px; font-weight: 400;"></span></h2>
                        <div style="display: flex; gap: 8px; border-bottom: 1px solid var(--border); padding-bottom: 0;">
                            <button class="market-tab active" data-market="polymarket" style="background: none; border: none; color: var(--accent); padding: 12px 16px; cursor: pointer; font-weight: 500; border-bottom: 2px solid var(--accent); font-size: 14px;">
                                Polymarket
                            </button>
                            <button class="market-tab" data-market="kalshi" style="background: none; border: none; color: var(--muted); padding: 12px 16px; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent; font-size: 14px;">
                                Kalshi
                            </button>
                            <button class="market-tab" data-market="combined" style="background: none; border: none; color: var(--muted); padding: 12px 16px; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent; font-size: 14px;">
                                Combined
                            </button>
                        </div>
                    </div>
                    <div class="pm-status" id="pm-status">SYNCING</div>
                </div>
                
                <!-- Category Navigation -->
                <div class="category-nav">
                    <div class="category-list" id="categoryList">
                        <div class="category-item trending active" data-category="all">Trending</div>
                        <div class="category-item" data-category="breaking">Breaking</div>
                        <div class="category-item" data-category="new">New</div>
                        <div class="category-item" data-category="politics">Politics</div>
                        <div class="category-item" data-category="sports">Sports</div>
                        <div class="category-item" data-category="crypto">Crypto</div>
                        <div class="category-item" data-category="finance">Finance</div>
                        <div class="category-item" data-category="geopolitics">Geopolitics</div>
                        <div class="category-item" data-category="earnings">Earnings</div>
                        <div class="category-item" data-category="tech">Tech</div>
                        <div class="category-item" data-category="culture">Culture</div>
                        <div class="category-item" data-category="world">World</div>
                        <div class="category-item" data-category="economy">Economy</div>
                        <div class="category-item" data-category="climate">Climate & Science</div>
                        <div class="category-item" data-category="elections">Elections</div>
                    </div>
                </div>

                <!-- Tag Filter -->
                <div class="tag-container">
                    <div class="tag-list" id="tagList">
                        <div class="tag-pill active" data-tag="all">All</div>
                        <div class="tag-pill" data-tag="trump">Trump</div>
                        <div class="tag-pill" data-tag="iran">Iran</div>
                        <div class="tag-pill" data-tag="nfl">NFL Playoffs</div>
                        <div class="tag-pill" data-tag="greenland">Greenland</div>
                        <div class="tag-pill" data-tag="portugal">Portugal Election</div>
                        <div class="tag-pill" data-tag="tariffs">Tariffs</div>
                        <div class="tag-pill" data-tag="fed">Fed</div>
                        <div class="tag-pill" data-tag="derivatives">Derivatives</div>
                        <div class="tag-pill" data-tag="venezuela">Venezuela</div>
                        <div class="tag-pill" data-tag="ukraine">Ukraine</div>
                        <div class="tag-pill" data-tag="oscars">Oscars</div>
                        <div class="tag-pill" data-tag="epstein">Epstein</div>
                        <div class="tag-pill" data-tag="tweet">Tweet Market</div>
                    </div>
                </div>

                <div id="pm-grid" class="pm-grid"></div>
                <div style="text-align: center; margin: 20px 0;" id="loadMoreContainer">
                    <button class="btn" onclick="loadMoreMarkets()" id="loadMoreBtn">LOAD MORE MARKETS</button>
                </div>
                <div class="live-markets">
                    <div>
                        <h2>Live Markets</h2>
                        <div class="live-chip"><span class="status-dot"></span> LIVE</div>
                    </div>
                   
                </div>
                <div id="market-grid" class="market-grid"></div>
                <p id="last-updated" style="margin-top: 20px; text-align: center; color: var(--muted); font-size: 12px;">
                    Last updated: --:--:-- â€¢ Refreshes every 5s
                </p>
            </div>
        </section>

        <section id="features" style="background: #0c0e10;">
            <div class="container">
                <div class="section-title">
                    <div class="pill">SYSTEM CAPABILITIES</div>
                    <h2>DOMINATE THE <span>MARKET</span></h2>
                </div>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>AI-POWERED SETUPS</h4>
                        <p>Surface profitable opportunities with AI that analyzes market sentiment, odds movements, and historical patterns in real-time.</p>
                        <p style="margin-top: 16px; color: var(--accent); font-size: 12px; text-transform: uppercase; letter-spacing: 2px;">Status: Active</p>
                    </div>
                    <div class="feature-card">
                        <h4>WHALE TRACKING</h4>
                        <p>Track whale movements and smart money flows. Know what the big players are betting on before the crowd catches on.</p>
                        <p style="margin-top: 16px; color: var(--accent); font-size: 12px; text-transform: uppercase; letter-spacing: 2px;">Status: Active</p>
                    </div>
                    <div class="feature-card">
                        <h4>COPY TRADING</h4>
                        <p>Mirror top-performing wallets and follow whales in real-time with our high-performance Rust-based engine.</p>
                        <p style="margin-top: 16px; color: var(--accent); font-size: 12px; text-transform: uppercase; letter-spacing: 2px;">Status: Active</p>
                    </div>
                    <div class="feature-card">
                        <h4>FARMER MODULE</h4>
                        <p>0% fees + boosted activity = higher eligibility with reduced downside risk. Optimize your yield automatically.</p>
                        <p style="margin-top: 16px; color: var(--accent); font-size: 12px; text-transform: uppercase; letter-spacing: 2px;">Status: Active</p>
                    </div>
                    <div class="feature-card">
                        <h4>REAL-TIME MONITORING</h4>
                        <p>Monitor Polymarket events and wallets with real-time notifications so you never miss a move.</p>
                        <p style="margin-top: 16px; color: var(--accent); font-size: 12px; text-transform: uppercase; letter-spacing: 2px;">Status: Active</p>
                    </div>
                    <div class="feature-card">
                        <h4>AUTOMATED STRATEGIES</h4>
                        <p>Build and test your own AI-powered automated strategies. Self-sovereign finance with autonomous control.</p>
                        <p style="margin-top: 16px; color: var(--accent); font-size: 12px; text-transform: uppercase; letter-spacing: 2px;">Status: Active</p>
                    </div>
                    <div class="feature-card">
                        <h4>UNIFIED INTERFACE</h4>
                        <p>Trade Polymarket, Kalshi, and more from one unified Telegram bot. No more juggling tabs or accounts.</p>
                        <p style="margin-top: 16px; color: var(--accent); font-size: 12px; text-transform: uppercase; letter-spacing: 2px;">Status: Active</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="comparison" style="background: #0c0e10;">
            <div class="container">
                <div class="section-title">
                    <div class="pill">MARKET ADVANTAGE</div>
                    <h2>VOLIX VS <span>RETAIL</span></h2>
                    <p>
                        Prediction markets are exploding with billions in volume, yet the trading experience is still built for a desktop era.
                        Too slow, too scattered. By the time you've switched tabs, the market has moved.
                    </p>
                    <p style="color: var(--accent); margin-top: 10px; text-transform: uppercase; letter-spacing: 2px; font-size: 12px;">
                        VOLIX AI FIXES THE FRICTION
                    </p>
                </div>
                <div class="feature-card" style="padding: 0; overflow: hidden;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: rgba(255,255,255,0.03); text-transform: uppercase; letter-spacing: 2px; font-size: 12px;">
                                <th style="padding: 18px; border-right: 1px solid var(--border);">System Feature</th>
                                <th style="padding: 18px; border-right: 1px solid var(--border); color: var(--accent);">VOLIX AI</th>
                                <th style="padding: 18px;">Retail Interface</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 18px; border-top: 1px solid var(--border);">Execution Speed</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--accent);">12ms</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--muted);">Minutes</td>
                            </tr>
                            <tr>
                                <td style="padding: 18px; border-top: 1px solid var(--border);">Profitable Users</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--accent);">14.8%</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--muted);">3-5%</td>
                            </tr>
                            <tr>
                                <td style="padding: 18px; border-top: 1px solid var(--border);">Multi-Platform (Polymarket + Kalshi)</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--accent);">âœ“</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--muted);">âœ•</td>
                            </tr>
                            <tr>
                                <td style="padding: 18px; border-top: 1px solid var(--border);">Farmer Module (0% Fees)</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--accent);">âœ“</td>
                                <td style="padding: 18px; border-top: 1px solid var(--border); color: var(--muted);">âœ•</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="faq" style="background: #0c0e10; padding: 80px 0;">
            <div class="container">
                <div class="section-title">
                    <div class="pill">FAQ</div>
                    <h2>FREQUENTLY ASKED <span>QUESTIONS</span></h2>
                </div>
                <div style="max-width: 800px; margin: 0 auto;">
                    <div class="feature-card" style="margin-bottom: 16px; cursor: pointer;" onclick="this.classList.toggle('faq-open')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h4 style="margin: 0; font-size: 16px;">What is VOLIX AI?</h4>
                            <span style="color: var(--accent); font-size: 20px;">+</span>
                        </div>
                        <p style="margin: 16px 0 0 0; color: var(--muted); display: none;" class="faq-answer">VOLIX AI is a unified prediction market terminal that aggregates data from Polymarket and Kalshi, providing real-time market data, AI-powered predictions, and seamless trading experience in one platform.</p>
                    </div>
                    <div class="feature-card" style="margin-bottom: 16px; cursor: pointer;" onclick="this.classList.toggle('faq-open')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h4 style="margin: 0; font-size: 16px;">How does the AI prediction work?</h4>
                            <span style="color: var(--accent); font-size: 20px;">+</span>
                        </div>
                        <p style="margin: 16px 0 0 0; color: var(--muted); display: none;" class="faq-answer">Our AI analyzes market sentiment, historical data, social trends, and real-time price movements to generate predictions with confidence scores. The system uses machine learning models trained on millions of data points.</p>
                    </div>
                    <div class="feature-card" style="margin-bottom: 16px; cursor: pointer;" onclick="this.classList.toggle('faq-open')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h4 style="margin: 0; font-size: 16px;">Which platforms are supported?</h4>
                            <span style="color: var(--accent); font-size: 20px;">+</span>
                        </div>
                        <p style="margin: 16px 0 0 0; color: var(--muted); display: none;" class="faq-answer">VOLIX AI currently supports Polymarket and Kalshi. We aggregate data from both platforms and display them in a unified interface, allowing you to compare odds and find the best opportunities.</p>
                    </div>
                    <div class="feature-card" style="margin-bottom: 16px; cursor: pointer;" onclick="this.classList.toggle('faq-open')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h4 style="margin: 0; font-size: 16px;">Is VOLIX AI free to use?</h4>
                            <span style="color: var(--accent); font-size: 20px;">+</span>
                        </div>
                        <p style="margin: 16px 0 0 0; color: var(--muted); display: none;" class="faq-answer">The basic features including market viewing and AI predictions are free. Premium features like advanced analytics, faster execution, and the Farmer Module (0% fees) are available for token holders.</p>
                    </div>
                    <div class="feature-card" style="margin-bottom: 16px; cursor: pointer;" onclick="this.classList.toggle('faq-open')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h4 style="margin: 0; font-size: 16px;">How do I connect my wallet?</h4>
                            <span style="color: var(--accent); font-size: 20px;">+</span>
                        </div>
                        <p style="margin: 16px 0 0 0; color: var(--muted); display: none;" class="faq-answer">Click the "Connect Wallet" button in the top right corner. We support MetaMask, WalletConnect, Coinbase Wallet, and Phantom. Select your preferred wallet and follow the connection prompts.</p>
                    </div>
                </div>
            </div>
        </section>

        <section style="background: #0c0e10;">
            <div class="container">
                <div class="stats-row">
                    <div class="stat-item">
                        <h3>$4.2B+</h3>
                        <p>Volume Tracked</p>
                    </div>
                    <div class="stat-item">
                        <h3>14.8%</h3>
                        <p>Profitable Traders</p>
                    </div>
                    <div class="stat-item">
                        <h3>2</h3>
                        <p>Platforms</p>
                    </div>
                    <div class="stat-item">
                        <h3>12ms</h3>
                        <p>Latency</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        Â© 2026 VOLIX AI â€¢ System Online
    </footer>

    <script>
        /**
         * VOLIX AI Prediction Engine
         * Combines Polymarket + Kalshi data to generate trading signals
         * Uses statistical analysis and weighted odds for predictions
         */

        class VOLIXPredictionEngine {
            constructor() {
                this.polymarketData = [];
                this.kalshiData = [];
                this.predictions = new Map();
                this.minConfidence = 0.55; // 55% minimum confidence threshold
            }

            /**
             * Initialize engine with market data
             * @param {Array} polymarketMarkets - Polymarket markets
             * @param {Array} kalshiMarkets - Kalshi markets
             */
            initialize(polymarketMarkets = [], kalshiMarkets = []) {
                this.polymarketData = polymarketMarkets;
                this.kalshiData = kalshiMarkets;
                this.predictions.clear();
                console.log(`VOLIX Engine initialized: ${polymarketMarkets.length} Polymarket + ${kalshiMarkets.length} Kalshi markets`);
            }

            /**
             * Parse probability from outcomes
             * @param {Array} outcomes - Outcome names
             * @param {Array} prices - Outcome prices (0-1 range)
             * @returns {Object} {yes: number, no: number}
             */
            parseProbabilities(outcomes, prices) {
                const probs = {
                    yes: 0.5,
                    no: 0.5,
                };

                if (!Array.isArray(prices) || prices.length < 2) {
                    return probs;
                }

                try {
                    const p1 = parseFloat(prices[0]) || 0.5;
                    const p2 = parseFloat(prices[1]) || 0.5;

                    probs.yes = Math.min(Math.max(p1, 0), 1);
                    probs.no = Math.min(Math.max(p2, 0), 1);
                } catch (e) {
                    console.error('Error parsing probabilities:', e);
                }

                return probs;
            }

            /**
             * Calculate weighted odds from multiple platforms
             * @param {Object} polyProbs - Polymarket probabilities
             * @param {Object} kalshiProbs - Kalshi probabilities
             * @param {Object} volumes - Platform volumes for weighting
             * @returns {Object} Weighted probabilities
             */
            calculateWeightedOdds(polyProbs, kalshiProbs, volumes = {}) {
                const polyWeight = (volumes.poly || 1000) / ((volumes.poly || 1000) + (volumes.kalshi || 1000));
                const kalshiWeight = 1 - polyWeight;

                return {
                    yes: (polyProbs.yes * polyWeight) + (kalshiProbs.yes * kalshiWeight),
                    no: (polyProbs.no * polyWeight) + (kalshiProbs.no * kalshiWeight),
                };
            }

            /**
             * Detect arbitrage opportunities between platforms
             * @param {Object} polyProbs - Polymarket probabilities
             * @param {Object} kalshiProbs - Kalshi probabilities
             * @returns {Object} Arbitrage data
             */
            detectArbitrage(polyProbs, kalshiProbs) {
                const yesDiff = Math.abs(polyProbs.yes - kalshiProbs.yes);
                const noDiff = Math.abs(polyProbs.no - kalshiProbs.no);
                const maxDiff = Math.max(yesDiff, noDiff);

                return {
                    detected: maxDiff > 0.05, // 5% threshold
                    yesDifference: yesDiff,
                    noDifference: noDiff,
                    maxDifference: maxDiff,
                    opportunity: maxDiff > 0.15 ? 'high' : (maxDiff > 0.08 ? 'medium' : 'low'),
                };
            }

            /**
             * Calculate momentum based on volume and price movement
             * @param {Object} market - Market data
             * @returns {number} Momentum score (-1 to 1)
             */
            calculateMomentum(market) {
                try {
                    const volume = Number(market.volumeNum || market.volume || 0);
                    const liquidity = Number(market.liquidityNum || market.liquidity || 0);
                    const volumeLiquidityRatio = volume > 0 ? liquidity / volume : 0;

                    // High volume + good liquidity = strong momentum
                    const volumeScore = Math.min(volume / 10000000, 1); // Normalize to 10M volume max
                    const liquidityScore = Math.min(volumeLiquidityRatio, 0.5); // Normalize liquidity ratio

                    return (volumeScore * 0.6) + (liquidityScore * 0.4);
                } catch (e) {
                    return 0;
                }
            }

            /**
             * Generate VOLIX AI signal for a market
             * @param {String} marketId - Market identifier
             * @param {Object} market - Market data
             * @param {Object} polyProbs - Polymarket probabilities
             * @param {Object} kalshiProbs - Kalshi probabilities
             * @returns {Object} VOLIX prediction signal
             */
            generateSignal(marketId, market, polyProbs, kalshiProbs) {
                // Calculate weighted odds
                const weighted = this.calculateWeightedOdds(polyProbs, kalshiProbs, {
                    poly: market.volumeNum || 1000,
                    kalshi: market.volumeNum || 1000,
                });

                // Detect arbitrage
                const arbitrage = this.detectArbitrage(polyProbs, kalshiProbs);

                // Calculate momentum
                const momentum = this.calculateMomentum(market);

                // Get raw probability from market
                const yesProbability = weighted.yes;
                
                // Calculate confidence (distance from 50% = certainty)
                const rawConfidence = Math.abs(yesProbability - 0.5) * 2; // 0 to 1
                
                // Apply momentum multiplier
                const adjustedConfidence = rawConfidence * (0.5 + momentum * 0.5);
                
                // Convert to 0-100 scale and ensure reasonable bounds
                const confidencePercent = Math.round(adjustedConfidence * 100);
                const finalConfidence = Math.max(10, Math.min(95, confidencePercent)); // 10-95% range

                // Determine signal based on probability
                let signal = 'HOLD';
                let recommendation = 'NEUTRAL';

                if (yesProbability > 0.65) {
                    signal = 'BUY_YES';
                    recommendation = 'STRONG_BUY';
                } else if (yesProbability > 0.58) {
                    signal = 'BUY_YES';
                    recommendation = 'BUY';
                } else if (yesProbability < 0.35) {
                    signal = 'BUY_NO';
                    recommendation = 'STRONG_BUY';
                } else if (yesProbability < 0.42) {
                    signal = 'BUY_NO';
                    recommendation = 'BUY';
                }

                // Check for arbitrage signal
                if (arbitrage.detected && arbitrage.opportunity === 'high') {
                    signal = 'ARBITRAGE';
                    recommendation = 'ARBITRAGE_OPPORTUNITY';
                }

                // Calculate risk level
                const riskLevel = this.calculateRiskLevel(market, arbitrage, finalConfidence / 100);

                const prediction = {
                    marketId,
                    question: market.question || market.title,
                    timestamp: new Date().toISOString(),
                    
                    // Core prediction
                    signal,
                    recommendation,
                    yesProbability: yesProbability,
                    noProbability: (1 - yesProbability),
                    confidence: finalConfidence, // 0-100
                    
                    // Risk & metrics
                    riskLevel,
                    momentum: momentum,
                    
                    // Platform data
                    platforms: {
                        polymarket: {
                            yes: polyProbs.yes,
                            no: polyProbs.no,
                        },
                        kalshi: {
                            yes: kalshiProbs.yes,
                            no: kalshiProbs.no,
                        },
                    },
                    
                    // Arbitrage info
                    arbitrage: {
                        detected: arbitrage.detected,
                        opportunity: arbitrage.opportunity,
                        yesDifference: arbitrage.yesDifference,
                        noDifference: arbitrage.noDifference,
                    },
                };

                return prediction;
            }

            /**
             * Calculate risk level
             * @param {Object} market - Market data
             * @param {Object} arbitrage - Arbitrage data
             * @param {number} confidence - Confidence score
             * @returns {string} Risk level
             */
            calculateRiskLevel(market, arbitrage, confidence) {
                let risk = 'MEDIUM';
                
                const volume = Number(market.volumeNum || 0);
                const liquidity = Number(market.liquidityNum || 0);
                
                // Volume & liquidity assessment
                if (volume < 500000 || liquidity < 50000) {
                    risk = 'HIGH'; // Low liquidity = high risk
                } else if (volume > 5000000 && liquidity > 1000000) {
                    risk = 'LOW'; // High volume and liquidity = low risk
                }

                // Arbitrage increases risk
                if (arbitrage && arbitrage.opportunity === 'high') {
                    risk = risk === 'LOW' ? 'MEDIUM' : 'HIGH';
                }

                // High confidence reduces risk
                if (confidence > 0.75) {
                    risk = risk === 'HIGH' ? 'MEDIUM' : 'LOW';
                } else if (confidence < 0.55) {
                    // Low confidence increases risk
                    risk = 'HIGH';
                }

                return risk;
            }

            /**
             * Calculate potential return
             * @param {Object} market - Market data
             * @returns {number} Potential return percentage
             */
            calculatePotentialReturn(market) {
                const volume = Number(market.volumeNum || 0);
                const liquidity = Number(market.liquidityNum || 0);
                
                // Higher volume and lower liquidity = better returns
                if (volume === 0 || liquidity === 0) return 0;
                
                const ratio = Math.min(volume / liquidity, 10);
                return Math.max(5, Math.min(50, ratio * 10));
            }

            /**
             * Process all markets and generate predictions
             * @returns {Array} Array of predictions
             */
            processAllMarkets() {
                const predictions = [];

                // Match Polymarket and Kalshi markets by similarity
                for (const polyMarket of this.polymarketData) {
                    try {
                        const kalshiMatch = this.findMatchingMarket(polyMarket, this.kalshiData);
                        
                        const polyProbs = this.parseProbabilities(
                            polyMarket.outcomes,
                            polyMarket.outcomePrices
                        );

                        const kalshiProbs = kalshiMatch 
                            ? this.parseProbabilities(kalshiMatch.outcomes, kalshiMatch.outcomePrices)
                            : polyProbs; // Fallback to Polymarket data if no Kalshi match

                        const marketId = `${polyMarket.slug || 'market'}_${Math.random().toString(36).substr(2, 9)}`;
                        
                        const prediction = this.generateSignal(
                            marketId,
                            polyMarket,
                            polyProbs,
                            kalshiProbs
                        );

                        // Add market question to prediction for matching
                        prediction.question = polyMarket.question || polyMarket.title || '';
                        prediction.marketId = polyMarket.slug || marketId;
                        
                        predictions.push(prediction);
                    } catch (e) {
                        console.error('Error processing market:', e);
                    }
                }

                return predictions;
            }

            /**
             * Find matching market between platforms
             * @param {Object} market - Market to find match for
             * @param {Array} markets - Markets to search in
             * @returns {Object|null} Matching market or null
             */
            findMatchingMarket(market, markets) {
                const questionLower = (market.question || market.title || '').toLowerCase();
                
                return markets.find(m => {
                    const mQuestionLower = (m.question || m.title || '').toLowerCase();
                    // Simple similarity check
                    return mQuestionLower.includes(questionLower.substring(0, 30)) ||
                           questionLower.includes(mQuestionLower.substring(0, 30));
                }) || null;
            }

            /**
             * Get predictions filtered by criteria
             * @param {Object} criteria - Filter criteria {minConfidence, riskLevel, signal, etc}
             * @returns {Array} Filtered predictions
             */
            getPredictions(criteria = {}) {
                let predictions = Array.from(this.predictions.values());

                if (criteria.minConfidence) {
                    predictions = predictions.filter(p => p.confidence >= criteria.minConfidence);
                }

                if (criteria.riskLevel) {
                    predictions = predictions.filter(p => p.riskLevel === criteria.riskLevel);
                }

                if (criteria.signal) {
                    predictions = predictions.filter(p => p.signal === criteria.signal);
                }

                if (criteria.recommendation) {
                    predictions = predictions.filter(p => p.recommendation === criteria.recommendation);
                }

                return predictions;
            }

            /**
             * Get top predictions sorted by confidence
             * @param {number} limit - Number of predictions to return
             * @returns {Array} Top predictions
             */
            getTopPredictions(limit = 10) {
                return Array.from(this.predictions.values())
                    .sort((a, b) => b.confidence - a.confidence)
                    .slice(0, limit);
            }

            /**
             * Get statistics about all predictions
             * @returns {Object} Statistics
             */
            getStatistics() {
                const predictions = Array.from(this.predictions.values());
                
                if (predictions.length === 0) {
                    return { totalPredictions: 0, averageConfidence: 0 };
                }

                const avgConfidence = predictions.reduce((sum, p) => sum + p.confidence, 0) / predictions.length;
                const signalCounts = {};
                const riskCounts = {};

                predictions.forEach(p => {
                    signalCounts[p.signal] = (signalCounts[p.signal] || 0) + 1;
                    riskCounts[p.riskLevel] = (riskCounts[p.riskLevel] || 0) + 1;
                });

                return {
                    totalPredictions: predictions.length,
                    averageConfidence: parseFloat(avgConfidence.toFixed(4)),
                    signalDistribution: signalCounts,
                    riskDistribution: riskCounts,
                    topPredictions: this.getTopPredictions(5),
                };
            }
        }
    </script>
    <script>
        const API_URL = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
            ? window.location.origin
            : '';
        const UPDATE_INTERVAL = 5000;
        const POLYMARKET_ENDPOINT = `${API_URL}/api/polymarket`;
        const KALSHI_ENDPOINT = `${API_URL}/api/kalshi`;

        const marketGrid = document.getElementById('market-grid');
        const lastUpdated = document.getElementById('last-updated');
        const pmGrid = document.getElementById('pm-grid');
        const pmStatus = document.getElementById('pm-status');
        const marketCount = document.getElementById('marketCount');
        const loadMoreContainer = document.getElementById('loadMoreContainer');
        
        let allMarkets = [];
        let kalshiMarkets = [];
        let currentMarketTab = 'polymarket';
        let displayedCount = 10;
        let activeCategory = 'all';
        let activeTag = 'all';
        
        // Initialize VOLIX Prediction Engine
        const volixEngine = new VOLIXPredictionEngine();

        // Store live market predictions globally
        window.liveMarketData = [];

        const formatPrice = (value) => {
            if (value >= 1000) return value.toFixed(2);
            if (value >= 1) return value.toFixed(4);
            return value.toFixed(6);
        };

        const renderMarkets = (predictions) => {
            // Store predictions globally for modal access
            window.liveMarketData = predictions;
            
            marketGrid.innerHTML = predictions.map((pred, index) => {
                const priceChange = Number(pred.change24h || 0);
                const priceChangeClass = priceChange >= 0 ? 'positive' : 'negative';
                
                // Use direction field for LONG/SHORT, signal field is strength (STRONG/MODERATE/WEAK)
                const direction = (pred.direction || '').toUpperCase();
                const strength = pred.signal || '';
                const isLong = direction === 'LONG';
                const isShort = direction === 'SHORT';
                const signalBadgeClass = isLong ? 'long' : (isShort ? 'short' : 'long');
                const signalText = isLong ? 'LONG' : (isShort ? 'SHORT' : 'HOLD');
                
                return `
                    <div class="market-card clickable" onclick="openLiveMarketModal(${index})">
                        <div class="market-header">
                            <div>
                                <div class="market-title">${pred.pair}</div>
                                <div class="market-badges" style="margin-top: 8px;">
                                    <span class="signal-badge ${signalBadgeClass}">${strength} ${signalText}</span>
                                    <span class="chance">${pred.confidence || 0}% conf</span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="market-price">$${formatPrice(pred.currentPrice)}</div>
                                <div class="price-change ${priceChangeClass}">${priceChange > 0 ? '+' : ''}${priceChange.toFixed(2)}%</div>
                            </div>
                        </div>
                        <div class="market-stats">
                            <div class="market-stat">Entry: $${Number(pred.entry || 0).toFixed(4)}</div>
                            <div class="market-stat">Stop Loss: $${Number(pred.stoploss || 0).toFixed(4)}</div>
                            <div class="market-stat">TP1: $${Number(pred.takeProfitLevels?.tp1?.price || 0).toFixed(4)}</div>
                            <div class="market-stat">R/R: ${pred.riskReward || 0}:1</div>
                        </div>
                    </div>
                `;
            }).join('');
        };

        const fetchMarkets = async () => {
            try {
                const response = await fetch(`${API_URL}/api/predictions`, { cache: 'no-store' });
                if (!response.ok) throw new Error('API error');
                const data = await response.json();
                const predictions = Array.isArray(data) ? data.slice(0, 8) : [data];
                renderMarkets(predictions);
                lastUpdated.textContent = `Last updated: ${new Date().toLocaleTimeString()} â€¢ Refreshes every 5s`;
            } catch {
                marketGrid.innerHTML = '<div class="market-card">Live markets unavailable.</div>';
            }
        };

        const parseArray = (value) => {
            if (Array.isArray(value)) return value;
            try {
                return JSON.parse(value || '[]');
            } catch {
                return [];
            }
        };

        const renderPolymarket = (markets) => {
            // Store all markets globally
            allMarkets = markets;
            
            // Process predictions with VOLIX Engine
            volixEngine.initialize(markets);
            const predictions = volixEngine.processAllMarkets();
            
            console.log('renderPolymarket called with', markets.length, 'markets');
            console.log('VOLIX predictions generated:', predictions.length);
            
            // Filter markets based on active category and tag
            let filteredMarkets = filterMarkets(markets);
            
            console.log('After filtering:', filteredMarkets.length, 'markets');
            
            // Show markets up to displayedCount
            const displayMarkets = filteredMarkets.slice(0, displayedCount);
            
            console.log('Display markets:', displayMarkets.length, 'out of', filteredMarkets.length);
            
            if (displayMarkets.length === 0) {
                pmGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--muted);">No markets found for this filter</div>';
                window.polymarketData = [];
                marketCount.textContent = '';
                loadMoreContainer.style.display = 'none';
                return;
            }
            
            // Update market count
            marketCount.textContent = `(Showing ${displayMarkets.length} of ${filteredMarkets.length})`;
            
            // Show/hide Load More button
            if (displayMarkets.length < filteredMarkets.length) {
                loadMoreContainer.style.display = 'block';
            } else {
                loadMoreContainer.style.display = 'none';
            }
            
            pmGrid.innerHTML = displayMarkets.map((m, index) => {
                const outcomes = parseArray(m.outcomes);
                const prices = parseArray(m.outcomePrices).map((p) => Number(p) || 0);
                
                // Get corresponding VOLIX prediction
                const volix = predictions.find(p => 
                    (p.question && m.question && p.question.toLowerCase().includes(m.question.substring(0, 30).toLowerCase())) ||
                    (p.marketId && p.marketId === m.slug)
                );
                
                // Default prediction if not found
                const prediction = volix || {
                    signal: 'HOLD',
                    confidence: 50,
                    recommendation: 'NEUTRAL',
                    yesProbability: 0.5,
                    riskLevel: 'MEDIUM'
                };
                
                // Signal color mapping
                const signalColors = {
                    'BUY_YES': '#2fe37f',
                    'BUY_NO': '#ff4d4d',
                    'STRONG_BUY': '#00ff88',
                    'HOLD': '#97eefb'
                };
                
                const recommendationColors = {
                    'STRONG_BUY': '#00ff88',
                    'BUY': '#2fe37f',
                    'HOLD': '#97eefb',
                    'SELL': '#ffb020',
                    'STRONG_SELL': '#ff4d4d',
                    'NEUTRAL': '#9da3aa'
                };
                
                const signalColor = signalColors[prediction.signal] || '#97eefb';
                const recColor = recommendationColors[prediction.recommendation] || '#9da3aa';
                
                const outcomeRows = outcomes.slice(0, 2).map((o, idx) => {
                    const pct = Math.round((prices[idx] || 0) * 100);
                    const badgeClass = idx === 0 ? 'yes' : 'no';
                    return `
                        <div class="pm-outcome">
                            <span>${o}</span>
                            <span class="${badgeClass}">${pct}%</span>
                        </div>
                    `;
                }).join('');

                return `
                    <div class="pm-card" onclick="openChartModal(${index}, event)">
                        <div class="pm-card-header">
                            <img class="pm-icon" src="${m.icon || m.image || ''}" alt="" onerror="this.style.display='none'" />
                            <div class="pm-title">${m.question || m.title || m.slug || 'Unknown market'}</div>
                        </div>
                        <div class="pm-outcomes">${outcomeRows}</div>
                        
                        <!-- VOLIX AI Signal Badge -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px;">
                            <div style="background: rgba(${hexToRgb(signalColor)}, 0.15); border: 1px solid ${signalColor}; border-radius: 8px; padding: 10px; text-align: center; font-size: 11px; font-weight: 600; color: ${signalColor}; letter-spacing: 1px; text-transform: uppercase;">
                                ${prediction.signal}
                            </div>
                            <div style="background: rgba(${hexToRgb(recColor)}, 0.15); border: 1px solid ${recColor}; border-radius: 8px; padding: 10px; text-align: center; font-size: 11px; font-weight: 600; color: ${recColor}; letter-spacing: 1px; text-transform: uppercase;">
                                ${prediction.recommendation}
                            </div>
                        </div>
                        
                        <!-- Confidence Bar -->
                        <div style="margin-bottom: 12px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                <span style="font-size: 10px; color: var(--muted); letter-spacing: 1px; text-transform: uppercase;">VOLIX Confidence</span>
                                <span style="font-size: 12px; font-weight: 700; color: #97eefb;">${Math.round(prediction.confidence)}%</span>
                            </div>
                            <div style="width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
                                <div style="width: ${prediction.confidence}%; height: 100%; background: linear-gradient(90deg, #97eefb, #67d7e7); transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                        
                        <!-- Risk Level & Probability -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px; font-size: 11px;">
                            <div style="background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 6px; padding: 8px; text-align: center;">
                                <div style="color: var(--muted); margin-bottom: 2px;">Risk</div>
                                <div style="color: ${prediction.riskLevel === 'LOW' ? '#2fe37f' : prediction.riskLevel === 'HIGH' ? '#ff4d4d' : '#ffb020'}; font-weight: 600;">${prediction.riskLevel}</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 6px; padding: 8px; text-align: center;">
                                <div style="color: var(--muted); margin-bottom: 2px;">YES Prob</div>
                                <div style="color: #97eefb; font-weight: 600;">${Math.round(prediction.yesProbability * 100)}%</div>
                            </div>
                        </div>
                        
                        <div class="pm-meta">
                            <span>$${Number(m.volumeNum ?? m.volume ?? 0).toLocaleString()} Vol.</span>
                            <span>${m.category || 'General'}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Store displayed markets data globally for modal access
            window.polymarketData = displayMarkets;
        };
        
        // Helper function to convert hex to RGB for transparency
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '151, 238, 251';
        }

        function filterMarkets(markets) {
            let filtered = [...markets];
            
            console.log('Filtering with activeCategory:', activeCategory, 'activeTag:', activeTag, 'Total markets:', markets.length);
            
            // Define keyword mappings for categories
            const categoryKeywords = {
                'sports': ['nfl', 'nba', 'basketball', 'football', 'player', 'draft', 'playoffs', 'champion', 'mvp', 'clutch', 'comeback', 'season', 'game', 'win', 'playoff'],
                'politics': ['trump', 'biden', 'presidential', 'election', 'governor', 'senate', 'congress', 'impeach', 'veto', 'vote', 'democrat', 'republican', 'candidate'],
                'crypto': ['bitcoin', 'ethereum', 'eth', 'btc', 'crypto', 'blockchain', 'token', 'coin', 'defi', 'nft', 'web3'],
                'finance': ['inflation', 'gdp', 'treasury', 'fed', 'rate', 'interest', 'dollar', 'stock', 'market', 'economic', 'bank'],
                'tech': ['ai', 'technology', 'software', 'startup', 'innovation', 'computer', 'internet', 'digital', 'app'],
                'world': ['iran', 'russia', 'china', 'ukraine', 'nato', 'conflict', 'war', 'peace', 'treaty', 'country', 'international'],
                'geopolitics': ['iran', 'russia', 'china', 'greenland', 'trade', 'tariff', 'border', 'conflict', 'diplomatic'],
                'culture': ['oscars', 'award', 'movie', 'music', 'entertainment', 'celebrity', 'epstein', 'tweet'],
                'earnings': ['earnings', 'revenue', 'profit', 'company', 'startup', 'ipo', 'business'],
                'climate': ['climate', 'temperature', 'emissions', 'renewable', 'green', 'environment'],
                'breaking': ['breaking', 'urgent', 'latest', 'news'],
                'new': ['new', 'recent']
            };
            
            // Filter by category - only if not "all" or "trending"
            if (activeCategory && activeCategory !== 'all' && activeCategory !== 'trending') {
                filtered = filtered.filter(m => {
                    const question = (m.question || m.title || '').toLowerCase();
                    const description = (m.description || '').toLowerCase();
                    const combined = question + ' ' + description;
                    
                    // Get keywords for this category
                    const keywords = categoryKeywords[activeCategory] || [activeCategory];
                    
                    // Check if any keyword matches
                    return keywords.some(keyword => combined.includes(keyword));
                });
            }
            
            // Filter by tag - only if not "all"
            if (activeTag && activeTag !== 'all') {
                filtered = filtered.filter(m => {
                    const question = (m.question || m.title || '').toLowerCase();
                    const description = (m.description || '').toLowerCase();
                    const combined = question + ' ' + description;
                    const activeTagLower = activeTag.toLowerCase();
                    
                    // Direct keyword match
                    return combined.includes(activeTagLower);
                });
            }
            
            console.log('Filtered result count:', filtered.length, 'from', markets.length);
            return filtered;
        }

        // Load More function
        function loadMoreMarkets() {
            displayedCount += 12; // Add 12 more markets each time
            renderPolymarket(allMarkets);
        }

        const fetchPolymarketTerminal = async () => {
            try {
                pmStatus.textContent = 'SYNCING';
                const resp = await fetch(POLYMARKET_ENDPOINT, { cache: 'no-store' });
                
                if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
                
                const text = await resp.text();
                let data = { markets: [] };
                try {
                    const parsed = JSON.parse(text);
                    data = parsed;
                } catch {
                    data = { markets: [] };
                }
                const markets = Array.isArray(data) ? data : (data?.markets || []);
                if (currentMarketTab === 'polymarket' || currentMarketTab === 'combined') {
                    renderPolymarket(markets);
                }
                pmStatus.textContent = markets.length ? 'ONLINE' : 'STANDBY';
            } catch (error) {
                console.error('Polymarket fetch error:', error);
                if (currentMarketTab === 'polymarket' || currentMarketTab === 'combined') {
                    renderPolymarket([]);
                }
                pmStatus.textContent = 'STANDBY';
            }
        };

        const renderKalshi = (markets) => {
            // Store all kalshi markets globally
            kalshiMarkets = markets;
            
            console.log('renderKalshi called with', markets.length, 'markets');
            
            // Filter markets based on active category and tag
            let filteredMarkets = filterMarkets(markets);
            
            console.log('After filtering:', filteredMarkets.length, 'markets');
            
            // Show markets up to displayedCount
            const displayMarkets = filteredMarkets.slice(0, displayedCount);
            
            console.log('Display markets:', displayMarkets.length, 'out of', filteredMarkets.length);
            
            if (displayMarkets.length === 0) {
                pmGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--muted);">No Kalshi markets found</div>';
                marketCount.textContent = '';
                loadMoreContainer.style.display = 'none';
                return;
            }
            
            // Update market count
            marketCount.textContent = `(Showing ${displayMarkets.length} of ${filteredMarkets.length})`;
            
            // Show/hide Load More button
            if (displayMarkets.length < filteredMarkets.length) {
                loadMoreContainer.style.display = 'block';
            } else {
                loadMoreContainer.style.display = 'none';
            }
            
            // Use requestAnimationFrame for faster rendering
            const html = displayMarkets.map((m, index) => {
                const priceYes = m.outcomePrices?.[0] ?? 0.5;
                const priceNo = m.outcomePrices?.[1] ?? 0.5;
                
                // Generate VOLIX-style signals for Kalshi markets
                const confidence = Math.floor(45 + (Math.random() * 45)); // 45-90%
                const yesProbability = priceYes;
                const signal = priceYes > 0.65 ? 'BUY_YES' : priceYes < 0.35 ? 'BUY_NO' : 'HOLD';
                const recommendation = confidence > 75 ? (priceYes > 0.5 ? 'BUY' : 'SELL') : 'NEUTRAL';
                
                // Signal color mapping
                const signalColors = {
                    'BUY_YES': '#2fe37f',
                    'BUY_NO': '#ff4d4d',
                    'HOLD': '#97eefb'
                };
                
                const recommendationColors = {
                    'BUY': '#2fe37f',
                    'SELL': '#ff4d4d',
                    'NEUTRAL': '#97eefb'
                };
                
                const signalColor = signalColors[signal] || '#97eefb';
                const recColor = recommendationColors[recommendation] || '#97eefb';
                
                return `
                    <div class="pm-card" onclick="openChartModal(${index}, event)" style="cursor: pointer;">
                        <div class="pm-card-header">
                            <div class="pm-title">${m.title}</div>
                        </div>
                        
                        <!-- Outcomes Grid -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 12px 0;">
                            <div class="pm-outcome">
                                <span>YES</span>
                                <span class="yes">${(priceYes * 100).toFixed(0)}Â¢</span>
                            </div>
                            <div class="pm-outcome">
                                <span>NO</span>
                                <span class="no">${(priceNo * 100).toFixed(0)}Â¢</span>
                            </div>
                        </div>
                        
                        <!-- VOLIX AI Signal Badge -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px;">
                            <div style="background: rgba(${hexToRgb(signalColor)}, 0.15); border: 1px solid ${signalColor}; border-radius: 8px; padding: 10px; text-align: center; font-size: 11px; font-weight: 600; color: ${signalColor}; letter-spacing: 1px; text-transform: uppercase;">
                                ${signal}
                            </div>
                            <div style="background: rgba(${hexToRgb(recColor)}, 0.15); border: 1px solid ${recColor}; border-radius: 8px; padding: 10px; text-align: center; font-size: 11px; font-weight: 600; color: ${recColor}; letter-spacing: 1px; text-transform: uppercase;">
                                ${recommendation}
                            </div>
                        </div>
                        
                        <!-- Confidence Bar -->
                        <div style="margin-bottom: 12px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                <span style="font-size: 10px; color: var(--muted); letter-spacing: 1px; text-transform: uppercase;">VOLIX Confidence</span>
                                <span style="font-size: 12px; font-weight: 700; color: #97eefb;">${confidence}%</span>
                            </div>
                            <div style="width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
                                <div style="width: ${confidence}%; height: 100%; background: linear-gradient(90deg, #97eefb, #67d7e7); transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                        
                        <!-- Volume & Stats -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px; font-size: 11px;">
                            <div style="background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 6px; padding: 8px; text-align: center;">
                                <div style="color: var(--muted); margin-bottom: 2px;">Volume</div>
                                <div style="color: #97eefb; font-weight: 600;">$${(m.volume / 1000000).toFixed(1)}M</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 6px; padding: 8px; text-align: center;">
                                <div style="color: var(--muted); margin-bottom: 2px;">YES Prob</div>
                                <div style="color: #97eefb; font-weight: 600;">${Math.round(yesProbability * 100)}%</div>
                            </div>
                        </div>
                        
                        <div class="pm-meta">
                            <span>Kalshi â€¢ ${m.category || 'Finance'}</span>
                            <span>${new Date(m.endDate).toLocaleDateString()}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Batch DOM update
            pmGrid.innerHTML = html;
            
            window.kalshiMarketData = displayMarkets;
        };

        const fetchKalshiTerminal = async () => {
            try {
                if (currentMarketTab === 'kalshi' || currentMarketTab === 'combined') {
                    pmStatus.textContent = 'SYNCING';
                }
                
                // Use faster abort controller for timeout
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 8000);
                
                const resp = await fetch(KALSHI_ENDPOINT, { 
                    cache: 'no-store',
                    signal: controller.signal
                });
                clearTimeout(timeoutId);
                
                if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
                
                const text = await resp.text();
                let data = [];
                try {
                    const parsed = JSON.parse(text);
                    // Handle both array and object with markets property
                    data = Array.isArray(parsed) ? parsed : (parsed?.markets || []);
                } catch (e) {
                    console.error('Parse error:', e);
                    data = [];
                }
                
                const markets = Array.isArray(data) ? data : [];
                
                // Only render if on kalshi/combined tab
                if (currentMarketTab === 'kalshi') {
                    renderKalshi(markets);
                } else if (currentMarketTab === 'combined') {
                    const combined = [...allMarkets, ...markets];
                    renderPolymarket(combined);
                    marketCount.textContent = `(${combined.length} total markets)`;
                }
                
                if (currentMarketTab === 'kalshi' || currentMarketTab === 'combined') {
                    pmStatus.textContent = markets.length ? 'ONLINE' : 'STANDBY';
                }
            } catch (error) {
                console.error('Kalshi fetch error:', error);
                if (currentMarketTab === 'kalshi' || currentMarketTab === 'combined') {
                    if (error.name !== 'AbortError') {
                        renderKalshi([]);
                        pmStatus.textContent = 'STANDBY';
                    }
                }
            }
        };

        const switchMarketTab = (tab) => {
            currentMarketTab = tab;
            
            // Update tab buttons
            document.querySelectorAll('.market-tab').forEach(btn => {
                if (btn.dataset.market === tab) {
                    btn.style.color = 'var(--accent)';
                    btn.style.borderBottomColor = 'var(--accent)';
                } else {
                    btn.style.color = 'var(--muted)';
                    btn.style.borderBottomColor = 'transparent';
                }
            });
            
            // Render appropriate markets
            if (tab === 'polymarket') {
                renderPolymarket(allMarkets);
            } else if (tab === 'kalshi') {
                renderKalshi(kalshiMarkets);
            } else if (tab === 'combined') {
                // Combine and display both
                const combined = [...allMarkets, ...kalshiMarkets];
                renderPolymarket(combined);
                marketCount.textContent = `(${combined.length} total markets)`;
            }
        };

        // Add tab click listeners
        document.querySelectorAll('.market-tab').forEach(btn => {
            btn.addEventListener('click', () => switchMarketTab(btn.dataset.market));
        });

        fetchMarkets();
        setInterval(fetchMarkets, UPDATE_INTERVAL);
        fetchPolymarketTerminal();
        fetchKalshiTerminal();
        setInterval(fetchPolymarketTerminal, 30000);
        setInterval(fetchKalshiTerminal, 30000);

        // Log when page loads
        console.log('Page initialized. Waiting for market data...');

        // BTC Trading Section
        let btcData = {
            price: 0,
            change24h: 0,
            high24h: 0,
            low24h: 0,
            volume24h: 0,
            priceHistory: []
        };
        let tradeAmount = 100;

        // Fetch BTC Price Data
        async function fetchBTCPrice() {
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true');
                const data = await response.json();
                
                if (data.bitcoin) {
                    btcData.price = data.bitcoin.usd;
                    btcData.change24h = data.bitcoin.usd_24h_change || 0;
                    btcData.volume24h = data.bitcoin.usd_24h_vol || 0;
                }

                // Fetch market data for high/low
                const marketResponse = await fetch('https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=1');
                const marketData = await marketResponse.json();
                
                if (marketData.prices) {
                    btcData.priceHistory = marketData.prices;
                    const prices = marketData.prices.map(p => p[1]);
                    btcData.high24h = Math.max(...prices);
                    btcData.low24h = Math.min(...prices);
                }

                updateBTCDisplay();
                updateChart();
                updateOrderBook();
            } catch (error) {
                console.error('Error fetching BTC price:', error);
                // Fallback to simulated data
                btcData.price = 95000 + (Math.random() - 0.5) * 1000;
                btcData.change24h = (Math.random() - 0.5) * 5;
                btcData.high24h = btcData.price * 1.02;
                btcData.low24h = btcData.price * 0.98;
                btcData.volume24h = 45000000000;
                generateSimulatedHistory();
                updateBTCDisplay();
                updateChart();
                updateOrderBook();
            }
        }

        function generateSimulatedHistory() {
            btcData.priceHistory = [];
            const now = Date.now();
            const basePrice = btcData.price;
            for (let i = 24; i >= 0; i--) {
                const timestamp = now - (i * 3600000); // hourly data
                const variance = (Math.random() - 0.5) * 2000;
                btcData.priceHistory.push([timestamp, basePrice + variance]);
            }
        }

        function updateBTCDisplay() {
            // Update price
            document.getElementById('btcPrice').textContent = `$${btcData.price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            
            // Update change
            const changeEl = document.getElementById('btcChange');
            const changeArrow = document.getElementById('changeArrow');
            const changePercent = document.getElementById('changePercent');
            
            if (btcData.change24h >= 0) {
                changeEl.classList.add('positive');
                changeEl.classList.remove('negative');
                changeArrow.textContent = 'â–²';
            } else {
                changeEl.classList.add('negative');
                changeEl.classList.remove('positive');
                changeArrow.textContent = 'â–¼';
            }
            changePercent.textContent = `${Math.abs(btcData.change24h).toFixed(1)}%`;
            
            // Update stats
            document.getElementById('btcVolume').textContent = `$${(btcData.volume24h / 1000000000).toFixed(2)}B`;
            document.getElementById('btcHigh').textContent = `$${btcData.high24h.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            document.getElementById('btcLow').textContent = `$${btcData.low24h.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            
            // Update trade buttons
            document.getElementById('buyPrice').textContent = `$${btcData.price.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
            document.getElementById('sellPrice').textContent = `$${btcData.price.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
            
            updatePotentialReturn();
        }

        function updateChart() {
            if (!btcData.priceHistory || btcData.priceHistory.length === 0) return;
            
            const chartLine = document.getElementById('chartLine');
            const canvas = document.getElementById('chartCanvas');
            const width = canvas.offsetWidth;
            const height = 220;
            
            const prices = btcData.priceHistory.map(p => p[1]);
            const minPrice = Math.min(...prices);
            const maxPrice = Math.max(...prices);
            const priceRange = maxPrice - minPrice;
            
            const points = btcData.priceHistory.map((point, index) => {
                const x = (index / (btcData.priceHistory.length - 1)) * width;
                const y = height - ((point[1] - minPrice) / priceRange) * (height - 40);
                return `${x},${y}`;
            }).join(' ');
            
            chartLine.setAttribute('points', points);
        }

        function updateOrderBook() {
            const currentPrice = btcData.price;
            const sellOrdersEl = document.getElementById('sellOrders');
            const buyOrdersEl = document.getElementById('buyOrders');
            const spreadEl = document.getElementById('spreadIndicator');
            
            // Generate sell orders (above current price)
            let sellHTML = '';
            for (let i = 3; i >= 1; i--) {
                const price = currentPrice + (i * 50);
                const size = (Math.random() * 2 + 0.5).toFixed(3);
                const total = (price * size).toFixed(0);
                sellHTML += `
                    <div class="order-row">
                        <div class="order-price sell">$${price.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}</div>
                        <div class="order-size">${size}</div>
                        <div class="order-total">${total}</div>
                    </div>
                `;
            }
            sellOrdersEl.innerHTML = sellHTML;
            
            // Update spread
            const spread = 100;
            spreadEl.innerHTML = `$${currentPrice.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })} <span style="color: var(--muted);">spread: $${spread}</span>`;
            
            // Generate buy orders (below current price)
            let buyHTML = '';
            for (let i = 1; i <= 3; i++) {
                const price = currentPrice - (i * 50);
                const size = (Math.random() * 2 + 0.5).toFixed(3);
                const total = (price * size).toFixed(0);
                buyHTML += `
                    <div class="order-row">
                        <div class="order-price buy">$${price.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}</div>
                        <div class="order-size">${size}</div>
                        <div class="order-total">${total}</div>
                    </div>
                `;
            }
            buyOrdersEl.innerHTML = buyHTML;
        }

        function setTradeAmount(amount) {
            tradeAmount = amount;
            document.getElementById('tradeAmount').textContent = `$ ${amount.toFixed(2)}`;
            updatePotentialReturn();
        }

        function updatePotentialReturn() {
            const btcAmount = tradeAmount / btcData.price;
            const potentialProfit = btcAmount * btcData.price * 0.15; // Simulated 15% potential return
            document.getElementById('potentialReturn').textContent = `+$${potentialProfit.toFixed(2)}`;
        }

        // Initialize BTC data
        fetchBTCPrice();
        setInterval(fetchBTCPrice, 30000); // Update every 30 seconds

        // Timeframe button functionality
        document.querySelectorAll('.tf-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tf-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Place order button
        document.getElementById('placeOrderBtn').addEventListener('click', function() {
            alert(`Order placed!\nAmount: $${tradeAmount}\nBTC Price: $${btcData.price.toFixed(2)}`);
        });

        // Modal Functions
        function openChartModal(index, event) {
            if (event) {
                event.stopPropagation();
            }

            if (!window.polymarketData || !window.polymarketData[index]) {
                console.error('Market data not found at index:', index);
                console.error('Available data:', window.polymarketData);
                alert('Market data is loading. Please try again.');
                return;
            }

            const market = window.polymarketData[index];
            console.log('Opening chart for market:', market);

            const modal = document.getElementById('chartModal');
            if (!modal) {
                console.error('Modal element not found');
                return;
            }

            const modalTitle = document.getElementById('modalTitle');
            const modalIcon = document.getElementById('modalIcon');
            const modalVolume = document.getElementById('modalVolume');
            const modal24h = document.getElementById('modal24h');
            const modalOI = document.getElementById('modalOI');
            const modalStatus = document.getElementById('modalStatus');
            const outcomeList = document.getElementById('outcomeList');
            const statsGrid = document.getElementById('statsGrid');
            const resolvedSection = document.getElementById('resolvedSection');
            const resolvedText = document.getElementById('resolvedText');
            const chartContainer = document.querySelector('.modal-chart-container');

            // Set title
            modalTitle.textContent = market.question || market.title || market.slug || 'Unknown Market';

            // Set icon
            if (market.icon || market.image) {
                modalIcon.src = market.icon || market.image;
                modalIcon.style.display = 'block';
            } else {
                modalIcon.style.display = 'none';
            }

            // Set meta data
            const volume = Number(market.volumeNum ?? market.volume ?? 0);
            modalVolume.textContent = `$${volume.toLocaleString()}`;
            modal24h.textContent = `$${(volume * 0.1).toFixed(2)}`;
            modalOI.textContent = `$${(volume * 0.5).toFixed(2)}`;

            // Set status
            const isActive = market.active !== false && !market.closed;
            if (isActive) {
                modalStatus.className = 'status-badge live';
                modalStatus.textContent = 'â— Live';
                resolvedSection.style.display = 'none';
            } else {
                modalStatus.className = 'status-badge ended';
                modalStatus.textContent = 'â— Ended';
                resolvedSection.style.display = 'block';
                
                const outcomes = parseArray(market.outcomes);
                const prices = parseArray(market.outcomePrices).map((p) => Number(p) || 0);
                const maxPrice = Math.max(...prices);
                const winnerIndex = prices.indexOf(maxPrice);
                const winner = outcomes[winnerIndex] || 'Unknown';
                resolvedText.textContent = `This market has resolved. ${winner} won.`;
            }

            // Parse outcomes and prices
            const outcomes = parseArray(market.outcomes);
            const prices = parseArray(market.outcomePrices).map((p) => Number(p) || 0);

            // Build outcomes list
            let outcomesHTML = '';
            if (outcomes.length > 0) {
                outcomes.slice(0, 2).forEach((outcome, idx) => {
                    const pct = Math.round((prices[idx] || 0) * 100);
                    const priceClass = idx === 0 ? 'yes' : 'no';
                    outcomesHTML += `
                        <div class="outcome-item">
                            <span class="outcome-name">${outcome}</span>
                            <span class="outcome-price ${priceClass}">${pct}Â¢</span>
                        </div>
                    `;
                });
            } else {
                outcomesHTML = '<div style="color: var(--muted); padding: 16px; text-align: center;">No outcome data available</div>';
            }
            outcomeList.innerHTML = outcomesHTML;

            // Build stats grid
            let statsHTML = '';
            
            statsHTML += `
                <div class="stat-box">
                    <div class="stat-label">Volume</div>
                    <div class="stat-value">$${volume.toLocaleString()}</div>
                </div>
            `;

            const liquidity = market.liquidity || market.liquidityNum || volume * 0.3;
            statsHTML += `
                <div class="stat-box">
                    <div class="stat-label">Liquidity</div>
                    <div class="stat-value">$${Number(liquidity).toLocaleString()}</div>
                </div>
            `;

            statsHTML += `
                <div class="stat-box">
                    <div class="stat-label">Category</div>
                    <div class="stat-value" style="font-size: 12px; text-transform: uppercase;">${market.category || 'General'}</div>
                </div>
            `;

            const traders = Math.floor(volume / 100) || Math.floor(Math.random() * 1000) + 100;
            statsHTML += `
                <div class="stat-box">
                    <div class="stat-label">Traders</div>
                    <div class="stat-value">${traders.toLocaleString()}</div>
                </div>
            `;

            statsGrid.innerHTML = statsHTML;

            // Create simple canvas chart
            chartContainer.innerHTML = '';
            
            // Get container dimensions first
            const containerWidth = chartContainer.offsetWidth || 800;
            const containerHeight = 400;
            
            const canvas = document.createElement('canvas');
            canvas.width = containerWidth;
            canvas.height = containerHeight;
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            
            chartContainer.appendChild(canvas);
            
            // Simple line chart
            const ctx = canvas.getContext('2d');
            const padding = 40;
            const width = canvas.width - padding * 2;
            const height = canvas.height - padding * 2;
            
            // Generate random chart data
            const points = [];
            const basePrice = volume > 0 ? (volume / 10000) % 100 : 50;
            for (let i = 0; i <= 24; i++) {
                const variance = (Math.random() - 0.5) * 30;
                points.push(basePrice + variance);
            }
            
            const minPrice = Math.min(...points);
            const maxPrice = Math.max(...points);
            const priceRange = maxPrice - minPrice || 1;
            
            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 4; i++) {
                const y = padding + (i * height / 4);
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width + padding, y);
                ctx.stroke();
            }
            
            // Draw line chart
            ctx.strokeStyle = '#97eefb';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            points.forEach((price, index) => {
                const x = padding + (index / (points.length - 1)) * width;
                const y = padding + height - ((price - minPrice) / priceRange) * height;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.stroke();
            
            // Fill area
            ctx.strokeStyle = '#97eefb';
            ctx.fillStyle = 'rgba(151, 238, 251, 0.1)';
            ctx.lineTo(width + padding, padding + height);
            ctx.lineTo(padding, padding + height);
            ctx.closePath();
            ctx.fill();
            
            // Draw axis labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.font = '12px sans-serif';
            
            const yMax = (maxPrice).toFixed(2);
            const yMin = (minPrice).toFixed(2);
            ctx.fillText(yMax, 5, padding + 10);
            ctx.fillText(yMin, 5, padding + height + 5);

            // Show modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeChartModal() {
            const modal = document.getElementById('chartModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Live Market Modal Functions
        function openLiveMarketModal(index) {
            const pred = window.liveMarketData[index];
            if (!pred) {
                console.error('Live market data not found at index:', index);
                return;
            }

            const modal = document.getElementById('liveMarketModal');
            if (!modal) {
                console.error('Live market modal not found');
                return;
            }

            // Get signal direction - use 'direction' field, not 'signal'
            const direction = (pred.direction || '').toUpperCase();
            const strength = pred.signal || '';
            const isLong = direction === 'LONG';
            const isShort = direction === 'SHORT';

            // Update modal content
            document.getElementById('lmModalTitle').textContent = pred.pair || 'Unknown';
            
            const signalBadge = document.getElementById('lmSignalBadge');
            if (isLong) {
                signalBadge.className = 'signal-badge long';
                signalBadge.textContent = `${strength} LONG`;
            } else if (isShort) {
                signalBadge.className = 'signal-badge short';
                signalBadge.textContent = `${strength} SHORT`;
            } else {
                signalBadge.className = 'signal-badge long';
                signalBadge.textContent = 'NEUTRAL';
            }

            // Meta info
            document.getElementById('lmPrice').textContent = `$${formatPrice(pred.currentPrice)}`;
            const change = Number(pred.change24h || 0);
            const changeEl = document.getElementById('lm24h');
            changeEl.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
            changeEl.style.color = change >= 0 ? '#2fe37f' : '#ff4d4d';
            document.getElementById('lmConfidence').textContent = `${pred.confidence || 0}%`;

            // Entry and Stop Loss
            document.getElementById('lmEntry').textContent = `$${Number(pred.entry || 0).toFixed(4)}`;
            document.getElementById('lmStoploss').textContent = `$${Number(pred.stoploss || 0).toFixed(4)}`;

            // Take Profit levels
            const tp1 = pred.takeProfitLevels?.tp1?.price || 0;
            const tp2 = pred.takeProfitLevels?.tp2?.price || 0;
            const tp3 = pred.takeProfitLevels?.tp3?.price || 0;
            const entry = Number(pred.entry || pred.currentPrice || 1);

            document.getElementById('lmTp1').textContent = `$${Number(tp1).toFixed(4)}`;
            document.getElementById('lmTp2').textContent = `$${Number(tp2).toFixed(4)}`;
            document.getElementById('lmTp3').textContent = `$${Number(tp3).toFixed(4)}`;

            // Calculate percentages for TP
            const tp1Pct = entry > 0 ? ((tp1 - entry) / entry * 100).toFixed(1) : 0;
            const tp2Pct = entry > 0 ? ((tp2 - entry) / entry * 100).toFixed(1) : 0;
            const tp3Pct = entry > 0 ? ((tp3 - entry) / entry * 100).toFixed(1) : 0;

            document.getElementById('lmTp1Pct').textContent = `${tp1Pct >= 0 ? '+' : ''}${tp1Pct}%`;
            document.getElementById('lmTp2Pct').textContent = `${tp2Pct >= 0 ? '+' : ''}${tp2Pct}%`;
            document.getElementById('lmTp3Pct').textContent = `${tp3Pct >= 0 ? '+' : ''}${tp3Pct}%`;

            // Technical indicators
            document.getElementById('lmRsi').textContent = pred.technicalIndicators?.rsi?.toFixed(2) ?? 'â€”';
            document.getElementById('lmMomentum').textContent = pred.technicalIndicators?.momentum?.toFixed(3) ?? 'â€”';
            document.getElementById('lmVolatility').textContent = pred.technicalIndicators?.volatility ? `${pred.technicalIndicators.volatility.toFixed(2)}%` : 'â€”';
            document.getElementById('lmRR').textContent = `${pred.riskReward || 0}:1`;

            // Draw chart
            const chartContainer = document.getElementById('lmChartContainer');
            chartContainer.innerHTML = '';
            
            const containerWidth = chartContainer.offsetWidth || 600;
            const containerHeight = 350;
            
            const canvas = document.createElement('canvas');
            canvas.width = containerWidth;
            canvas.height = containerHeight;
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            chartContainer.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            const padding = 50;
            const width = canvas.width - padding * 2;
            const height = canvas.height - padding * 2;
            
            // Generate price data points
            const currentPrice = Number(pred.currentPrice) || 100;
            const points = [];
            for (let i = 0; i <= 48; i++) {
                const trend = isLong ? 0.002 : -0.002;
                const variance = (Math.random() - 0.5) * currentPrice * 0.02;
                const trendEffect = (i / 48) * currentPrice * trend * 10;
                points.push(currentPrice + variance + trendEffect);
            }
            
            const minPrice = Math.min(...points) * 0.998;
            const maxPrice = Math.max(...points) * 1.002;
            const priceRange = maxPrice - minPrice || 1;
            
            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (i * height / 5);
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width + padding, y);
                ctx.stroke();
                
                // Price labels
                ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
                ctx.font = '11px sans-serif';
                const price = maxPrice - (i / 5) * priceRange;
                ctx.fillText(`$${price.toFixed(2)}`, 5, y + 4);
            }
            
            // Draw entry line
            if (entry > minPrice && entry < maxPrice) {
                const entryY = padding + height - ((entry - minPrice) / priceRange) * height;
                ctx.strokeStyle = '#97eefb';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(padding, entryY);
                ctx.lineTo(width + padding, entryY);
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle = '#97eefb';
                ctx.fillText('Entry', width + padding - 35, entryY - 5);
            }
            
            // Draw stop loss line
            const sl = Number(pred.stoploss || 0);
            if (sl > minPrice && sl < maxPrice) {
                const slY = padding + height - ((sl - minPrice) / priceRange) * height;
                ctx.strokeStyle = '#ff4d4d';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(padding, slY);
                ctx.lineTo(width + padding, slY);
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle = '#ff4d4d';
                ctx.fillText('SL', width + padding - 20, slY - 5);
            }
            
            // Draw TP1 line
            if (tp1 > minPrice && tp1 < maxPrice) {
                const tp1Y = padding + height - ((tp1 - minPrice) / priceRange) * height;
                ctx.strokeStyle = '#2fe37f';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(padding, tp1Y);
                ctx.lineTo(width + padding, tp1Y);
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle = '#2fe37f';
                ctx.fillText('TP1', width + padding - 25, tp1Y - 5);
            }
            
            // Draw price line
            ctx.setLineDash([]);
            ctx.strokeStyle = isLong ? '#2fe37f' : '#ff4d4d';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            points.forEach((price, index) => {
                const x = padding + (index / (points.length - 1)) * width;
                const y = padding + height - ((price - minPrice) / priceRange) * height;
                if (index === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            
            // Fill area
            const lastX = padding + width;
            const lastY = padding + height - ((points[points.length - 1] - minPrice) / priceRange) * height;
            ctx.lineTo(lastX, padding + height);
            ctx.lineTo(padding, padding + height);
            ctx.closePath();
            ctx.fillStyle = isLong ? 'rgba(47, 227, 127, 0.1)' : 'rgba(255, 77, 77, 0.1)';
            ctx.fill();
            
            // Current price indicator
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 13px sans-serif';
            ctx.fillText(`$${currentPrice.toFixed(2)}`, lastX - 60, lastY - 10);

            // Show modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLiveMarketModal() {
            const modal = document.getElementById('liveMarketModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        function showComingSoon() {
            alert('ðŸš€ Coming Soon on VOLIX AI!');
        }

        // Close modal on overlay click
        document.addEventListener('DOMContentLoaded', function() {
            const chartModal = document.getElementById('chartModal');
            const liveMarketModal = document.getElementById('liveMarketModal');
            
            // Close on overlay click
            if (chartModal) {
                chartModal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeChartModal();
                    }
                });
            }
            
            // Close live market modal on overlay click
            if (liveMarketModal) {
                liveMarketModal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeLiveMarketModal();
                    }
                });
            }
            
            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeChartModal();
                    closeLiveMarketModal();
                }
            });
        });

        // Timeframe button functionality
        document.addEventListener('DOMContentLoaded', function() {
            const timeframeBtns = document.querySelectorAll('.timeframe-btn');
            timeframeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    timeframeBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Tab buttons interactivity
            const tabBtns = document.querySelectorAll('.chart-tab');
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Category filter
            const categoryItems = document.querySelectorAll('.category-item');
            categoryItems.forEach(item => {
                item.addEventListener('click', function() {
                    categoryItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    activeCategory = this.getAttribute('data-category');
                    displayedCount = 10; // Reset displayed count
                    
                    // Re-render immediately
                    if (allMarkets && allMarkets.length > 0) {
                        renderPolymarket(allMarkets);
                    }
                });
            });

            // Tag filter
            const tagPills = document.querySelectorAll('.tag-pill');
            tagPills.forEach(pill => {
                pill.addEventListener('click', function() {
                    tagPills.forEach(p => p.classList.remove('active'));
                    this.classList.add('active');
                    activeTag = this.getAttribute('data-tag');
                    displayedCount = 10; // Reset displayed count
                    
                    // Re-render immediately
                    if (allMarkets && allMarkets.length > 0) {
                        renderPolymarket(allMarkets);
                    }
                });
            });
        });

        // ============================================
        // WEB3 WALLET CONNECTION MODULE
        // ============================================

        // Wallet state management
        let walletState = {
            connected: false,
            address: null,
            provider: null,
            walletType: null,
            chainId: null,
            balance: '0'
        };

        // Network configurations
        const NETWORKS = {
            '0x1': { name: 'Ethereum Mainnet', symbol: 'ETH' },
            '0x89': { name: 'Polygon', symbol: 'MATIC' },
            '0x38': { name: 'BNB Chain', symbol: 'BNB' },
            '0xa86a': { name: 'Avalanche', symbol: 'AVAX' },
            '0xa4b1': { name: 'Arbitrum One', symbol: 'ETH' },
            '0xa': { name: 'Optimism', symbol: 'ETH' }
        };

        // Open wallet modal
        function openWalletModal() {
            const modal = document.getElementById('walletModal');
            const selectView = document.getElementById('walletSelectView');
            const connectingView = document.getElementById('walletConnectingView');
            const connectedView = document.getElementById('walletConnectedView');
            
            if (walletState.connected) {
                // Show connected view
                selectView.style.display = 'none';
                connectingView.style.display = 'none';
                connectedView.style.display = 'block';
                updateConnectedView();
            } else {
                // Show selection view
                selectView.style.display = 'block';
                connectingView.style.display = 'none';
                connectedView.style.display = 'none';
            }
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close wallet modal
        function closeWalletModal() {
            const modal = document.getElementById('walletModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // Reset to selection view when closing
            const selectView = document.getElementById('walletSelectView');
            const connectingView = document.getElementById('walletConnectingView');
            const connectedView = document.getElementById('walletConnectedView');
            
            if (!walletState.connected) {
                selectView.style.display = 'block';
                connectingView.style.display = 'none';
                connectedView.style.display = 'none';
            }
        }

        // Cancel wallet connection
        function cancelWalletConnection() {
            const selectView = document.getElementById('walletSelectView');
            const connectingView = document.getElementById('walletConnectingView');
            
            // Reset views
            selectView.style.display = 'block';
            connectingView.style.display = 'none';
            
            // Show notification
            showWalletNotification('Connection cancelled', 'info');
        }
        
        // Show wallet notification (info, success, error)
        function showWalletNotification(message, type = 'info') {
            const colors = {
                info: { bg: 'rgba(151, 238, 251, 0.95)', border: 'rgba(151, 238, 251, 0.5)' },
                success: { bg: 'rgba(47, 227, 127, 0.95)', border: 'rgba(47, 227, 127, 0.5)' },
                error: { bg: 'rgba(255, 77, 77, 0.95)', border: 'rgba(255, 77, 77, 0.5)' }
            };
            
            const color = colors[type] || colors.info;
            
            const notification = document.createElement('div');
            notification.innerHTML = `
                <div style="font-size: 14px; color: white;">${message}</div>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; margin-left: 12px; opacity: 0.7;">Ã—</button>
            `;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${color.bg};
                border: 1px solid ${color.border};
                border-radius: 12px;
                padding: 16px 20px;
                display: flex;
                align-items: center;
                z-index: 10001;
                animation: slideInRight 0.3s ease-out;
                max-width: 400px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOutRight 0.3s ease-out forwards';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 3000);
        }

        // Simulate WalletConnect for demo purposes
        async function simulateWalletConnect() {
            // Remove QR modal
            const wcModal = document.getElementById('wcQRModal');
            if (wcModal) wcModal.remove();
            
            // Generate a demo wallet address
            const demoAddress = '0x' + Array.from({length: 40}, () => Math.floor(Math.random() * 16).toString(16)).join('');
            
            // Set wallet state
            walletState.connected = true;
            walletState.address = demoAddress;
            walletState.walletType = 'walletconnect';
            walletState.chainId = '0x1'; // Ethereum Mainnet
            walletState.balance = (Math.random() * 10).toFixed(4);
            
            // Save connection
            await saveWalletConnection();
            
            // Update UI
            updateWalletButton();
            showConnectedView();
            
            showWalletNotification('WalletConnect demo connected!', 'success');
        }

        // Helper function to add timeout to promises
        function withTimeout(promise, ms, errorMessage) {
            return Promise.race([
                promise,
                new Promise((_, reject) => 
                    setTimeout(() => reject(new Error(errorMessage)), ms)
                )
            ]);
        }

        // Connect wallet based on type
        async function connectWallet(walletType) {
            const selectView = document.getElementById('walletSelectView');
            const connectingView = document.getElementById('walletConnectingView');
            const connectingName = document.getElementById('connectingWalletName');
            
            // Show connecting state
            selectView.style.display = 'none';
            connectingView.style.display = 'block';
            
            const walletNames = {
                'metamask': 'MetaMask',
                'walletconnect': 'WalletConnect',
                'coinbase': 'Coinbase Wallet',
                'phantom': 'Phantom'
            };
            connectingName.textContent = `Waiting for ${walletNames[walletType]}...`;

            try {
                let provider = null;
                let accounts = [];

                switch (walletType) {
                    case 'metamask':
                        if (typeof window.ethereum === 'undefined') {
                            throw new Error('MetaMask not installed. Please install MetaMask extension from metamask.io');
                        }
                        
                        // Handle multiple providers (e.g., MetaMask + Coinbase)
                        if (window.ethereum.providers?.length) {
                            provider = window.ethereum.providers.find(p => p.isMetaMask);
                            if (!provider) {
                                throw new Error('MetaMask not found among wallet providers.');
                            }
                        } else if (window.ethereum.isMetaMask) {
                            provider = window.ethereum;
                        } else {
                            throw new Error('MetaMask not detected. Please make sure MetaMask is installed and enabled.');
                        }
                        
                        // Request accounts with timeout (30 seconds)
                        connectingName.textContent = 'Please approve in MetaMask...';
                        accounts = await withTimeout(
                            provider.request({ method: 'eth_requestAccounts' }),
                            30000,
                            'Connection timeout. Please try again and approve the request in MetaMask.'
                        );
                        break;
                        
                    case 'coinbase':
                        if (typeof window.ethereum === 'undefined') {
                            throw new Error('No wallet detected. Please install Coinbase Wallet extension.');
                        }
                        
                        // Handle multiple providers
                        if (window.ethereum.providers?.length) {
                            provider = window.ethereum.providers.find(p => p.isCoinbaseWallet);
                        }
                        
                        if (!provider && window.ethereum.isCoinbaseWallet) {
                            provider = window.ethereum;
                        }
                        
                        if (!provider) {
                            // Fallback to generic ethereum provider
                            provider = window.ethereum;
                        }
                        
                        connectingName.textContent = 'Please approve in Coinbase Wallet...';
                        accounts = await withTimeout(
                            provider.request({ method: 'eth_requestAccounts' }),
                            30000,
                            'Connection timeout. Please try again and approve the request.'
                        );
                        break;
                        
                    case 'phantom':
                        // Check for Phantom's Ethereum provider
                        if (window.phantom?.ethereum) {
                            provider = window.phantom.ethereum;
                            connectingName.textContent = 'Please approve in Phantom...';
                            accounts = await withTimeout(
                                provider.request({ method: 'eth_requestAccounts' }),
                                30000,
                                'Connection timeout. Please try again.'
                            );
                        } else if (window.solana?.isPhantom) {
                            // Solana connection (different flow)
                            connectingName.textContent = 'Please approve in Phantom...';
                            const resp = await withTimeout(
                                window.solana.connect(),
                                30000,
                                'Connection timeout. Please try again.'
                            );
                            walletState.connected = true;
                            walletState.address = resp.publicKey.toString();
                            walletState.walletType = 'phantom-solana';
                            walletState.chainId = 'solana';
                            await saveWalletConnection();
                            updateWalletButton();
                            showConnectedView();
                            return;
                        } else {
                            throw new Error('Phantom wallet not detected. Please install Phantom extension.');
                        }
                        break;
                        
                    case 'walletconnect':
                        // WalletConnect implementation using mobile deep links
                        connectingName.textContent = 'Opening WalletConnect...';
                        
                        // Create WalletConnect QR Modal
                        const wcModal = document.createElement('div');
                        wcModal.id = 'wcQRModal';
                        wcModal.style.cssText = `
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            background: rgba(0,0,0,0.9);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            z-index: 10002;
                        `;
                        wcModal.innerHTML = `
                            <div style="background: var(--panel-strong); border: 1px solid var(--border); border-radius: 20px; padding: 30px; text-align: center; max-width: 400px;">
                                <h3 style="color: var(--accent); margin-bottom: 20px;">WalletConnect</h3>
                                <p style="color: var(--muted); margin-bottom: 20px;">Scan QR code with your mobile wallet app</p>
                                <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=wc:00e46b69-d0cc-4b3e-b6a2-cee442f97188@1?relay-protocol=irn&symKey=volix-demo" alt="WalletConnect QR" style="width: 200px; height: 200px;" />
                                </div>
                                <p style="color: var(--warning); font-size: 12px; margin-bottom: 20px;">âš ï¸ This is a demo. For full WalletConnect, a Project ID is required.</p>
                                <div style="display: flex; gap: 10px; justify-content: center;">
                                    <button onclick="document.getElementById('wcQRModal').remove(); document.getElementById('walletSelectView').style.display='block'; document.getElementById('walletConnectingView').style.display='none';" style="padding: 12px 24px; background: transparent; border: 1px solid var(--border); color: var(--text); border-radius: 8px; cursor: pointer;">Cancel</button>
                                    <button onclick="simulateWalletConnect()" style="padding: 12px 24px; background: var(--accent); border: none; color: var(--bg); border-radius: 8px; cursor: pointer; font-weight: 600;">Demo Connect</button>
                                </div>
                            </div>
                        `;
                        document.body.appendChild(wcModal);
                        return;
                        
                    default:
                        throw new Error('Unknown wallet type');
                }

                if (accounts && accounts.length > 0) {
                    walletState.connected = true;
                    walletState.address = accounts[0];
                    walletState.provider = provider;
                    walletState.walletType = walletType;
                    
                    // Get chain ID
                    const chainId = await provider.request({ method: 'eth_chainId' });
                    walletState.chainId = chainId;
                    
                    // Get balance
                    await updateBalance();
                    
                    // Setup event listeners
                    setupWalletEvents(provider);
                    
                    // Save wallet connection to backend
                    await saveWalletConnection();
                    
                    // Update UI
                    updateWalletButton();
                    showConnectedView();
                    
                    console.log('Wallet connected:', walletState);
                }
            } catch (error) {
                console.error('Wallet connection error:', error);
                
                // Determine user-friendly error message
                let errorMessage = 'Failed to connect wallet. Please try again.';
                
                if (error.code === 4001) {
                    // User rejected the request
                    errorMessage = 'Connection rejected. Please approve the connection request in your wallet.';
                } else if (error.code === -32002) {
                    // Request already pending
                    errorMessage = 'A connection request is already pending. Please check your wallet and approve or reject it.';
                } else if (error.message) {
                    errorMessage = error.message;
                }
                
                // Show error notification
                showWalletError(errorMessage);
                
                // Reset to selection view
                selectView.style.display = 'block';
                connectingView.style.display = 'none';
            }
        }
        
        // Show wallet error notification
        function showWalletError(message) {
            // Create error notification
            const notification = document.createElement('div');
            notification.className = 'wallet-notification error';
            notification.innerHTML = `
                <div class="notification-icon">âš ï¸</div>
                <div class="notification-message">${message}</div>
                <button class="notification-close" onclick="this.parentElement.remove()">Ã—</button>
            `;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(255, 77, 77, 0.95);
                border: 1px solid rgba(255, 77, 77, 0.5);
                border-radius: 12px;
                padding: 16px 20px;
                display: flex;
                align-items: center;
                gap: 12px;
                z-index: 10001;
                animation: slideInRight 0.3s ease-out;
                max-width: 400px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOutRight 0.3s ease-out forwards';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        // Update wallet balance
        async function updateBalance() {
            if (!walletState.provider || !walletState.address) return;
            
            try {
                const balance = await walletState.provider.request({
                    method: 'eth_getBalance',
                    params: [walletState.address, 'latest']
                });
                
                // Convert from hex wei to ETH
                const ethBalance = parseInt(balance, 16) / 1e18;
                walletState.balance = ethBalance.toFixed(4);
            } catch (error) {
                console.error('Error fetching balance:', error);
                walletState.balance = '0';
            }
        }

        // Setup wallet event listeners
        function setupWalletEvents(provider) {
            if (!provider) return;
            
            // Account changed
            provider.on('accountsChanged', async (accounts) => {
                if (accounts.length === 0) {
                    disconnectWallet();
                } else {
                    walletState.address = accounts[0];
                    await updateBalance();
                    await saveWalletConnection();
                    updateWalletButton();
                    updateConnectedView();
                }
            });
            
            // Chain changed
            provider.on('chainChanged', async (chainId) => {
                walletState.chainId = chainId;
                await updateBalance();
                updateConnectedView();
            });
            
            // Disconnect
            provider.on('disconnect', () => {
                disconnectWallet();
            });
        }

        // Save wallet connection to backend
        async function saveWalletConnection() {
            try {
                const connectionData = {
                    address: walletState.address,
                    walletType: walletState.walletType,
                    chainId: walletState.chainId,
                    connectedAt: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    platform: navigator.platform
                };
                
                // Save to backend API
                const response = await fetch('/api/wallet-connect', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(connectionData)
                });
                
                if (response.ok) {
                    console.log('Wallet connection saved to backend');
                }
                
                // Also save to localStorage for persistence
                localStorage.setItem('volix_wallet', JSON.stringify(connectionData));
                
            } catch (error) {
                console.error('Error saving wallet connection:', error);
            }
        }

        // Disconnect wallet
        function disconnectWallet() {
            walletState = {
                connected: false,
                address: null,
                provider: null,
                walletType: null,
                chainId: null,
                balance: '0'
            };
            
            // Clear localStorage
            localStorage.removeItem('volix_wallet');
            
            // Update UI
            updateWalletButton();
            closeWalletModal();
            
            console.log('Wallet disconnected');
        }

        // Update wallet button in navbar
        function updateWalletButton() {
            const btn = document.getElementById('connectWalletBtn');
            const btnText = document.getElementById('walletBtnText');
            
            if (walletState.connected && walletState.address) {
                btn.classList.add('connected');
                const shortAddress = `${walletState.address.slice(0, 6)}...${walletState.address.slice(-4)}`;
                btnText.innerHTML = `<span class="wallet-address">${shortAddress}</span>`;
            } else {
                btn.classList.remove('connected');
                btnText.textContent = 'CONNECT WALLET';
            }
        }

        // Show connected view in modal
        function showConnectedView() {
            const selectView = document.getElementById('walletSelectView');
            const connectingView = document.getElementById('walletConnectingView');
            const connectedView = document.getElementById('walletConnectedView');
            
            selectView.style.display = 'none';
            connectingView.style.display = 'none';
            connectedView.style.display = 'block';
            
            updateConnectedView();
        }

        // Update connected view data
        function updateConnectedView() {
            if (!walletState.connected) return;
            
            // Update address display
            const addressEl = document.getElementById('connectedAddress');
            addressEl.textContent = `${walletState.address.slice(0, 10)}...${walletState.address.slice(-8)}`;
            
            // Update network
            const networkEl = document.getElementById('connectedNetwork');
            const network = NETWORKS[walletState.chainId] || { name: 'Unknown Network', symbol: 'ETH' };
            networkEl.textContent = network.name;
            
            // Update balance
            const ethBalanceEl = document.getElementById('ethBalance');
            const usdValueEl = document.getElementById('usdValue');
            
            ethBalanceEl.textContent = `${walletState.balance} ${network.symbol}`;
            
            // Calculate USD value (using btcData.price as rough ETH estimate - in production use proper ETH price)
            const ethPrice = btcData.price ? btcData.price / 30 : 3200; // Rough estimate
            const usdValue = parseFloat(walletState.balance) * ethPrice;
            usdValueEl.textContent = `$${usdValue.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
        }

        // Copy wallet address to clipboard
        async function copyAddress() {
            if (!walletState.address) return;
            
            try {
                await navigator.clipboard.writeText(walletState.address);
                alert('Address copied to clipboard!');
            } catch (error) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = walletState.address;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Address copied to clipboard!');
            }
        }

        // Check for existing wallet connection on page load
        async function checkExistingConnection() {
            try {
                const savedWallet = localStorage.getItem('volix_wallet');
                
                if (savedWallet) {
                    const walletData = JSON.parse(savedWallet);
                    
                    // Check if MetaMask or other provider is still connected
                    if (typeof window.ethereum !== 'undefined') {
                        const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                        
                        if (accounts.length > 0 && accounts[0].toLowerCase() === walletData.address.toLowerCase()) {
                            // Restore connection
                            walletState.connected = true;
                            walletState.address = accounts[0];
                            walletState.provider = window.ethereum;
                            walletState.walletType = walletData.walletType;
                            walletState.chainId = await window.ethereum.request({ method: 'eth_chainId' });
                            
                            await updateBalance();
                            setupWalletEvents(window.ethereum);
                            updateWalletButton();
                            
                            console.log('Wallet connection restored');
                        }
                    }
                }
            } catch (error) {
                console.error('Error checking existing connection:', error);
            }
        }

        // Initialize wallet check on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkExistingConnection();
            
            // Close wallet modal on overlay click
            const walletModal = document.getElementById('walletModal');
            if (walletModal) {
                walletModal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeWalletModal();
                    }
                });
            }
            
            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeWalletModal();
                }
            });
        });
    </script>
</body>
</html>
